{"version":3,"sources":["Icons/info.svg","Icons/next.svg","Icons/arrow_leftUI.svg","Icons/unknown.svg","Icons/Github.svg","Icons/Instagram.svg","Icons/cancel.svg","Icons/minimize.svg","Icons/save_alt.svg","Icons/burst_mode.svg","Icons/arrow_upUI.svg","Icons/arrow_downUI.svg","Icons/scale.svg","Icons/rotate_left.svg","Icons/move.svg","Icons/full_square.svg","Icons/full_triangle.svg","Icons/full_ellipse.svg","Icons/HHatching.svg","Icons/VHatching.svg","Icons/LOHatching.svg","Icons/ROHatching.svg","Icons/grid_on.svg","Icons/markov.svg","Icons/void.svg","Icons/arrow_right.svg","Icons/zero.svg","Icons/one.svg","Icons/filter.svg","Icons/filter_none.svg","Icons/my_location.svg","Icons/dice.svg","Icons/increment.svg","Icons/decrement.svg","Icons/repeat.svg","Icons/sync_alt.svg","Icons/trending_flat.svg","Icons/arrow_rightUI.svg","Components/Canvas/Canvas.js","Components/ContextMenuBox/ContextMenuBox.js","Components/Colors/Color.js","DragManager.js","Components/Box/Box.js","Components/BoxGroup/BoxGroup.js","Components/Colors/Black.js","Components/Workspace/Workspace.js","Components/BoxInputNumber/BoxInputNumber.js","Components/Save/Save.js","Components/Input/Input.js","Components/Input/SliderBox/SliderBox.js","Components/Transforms/Transform.js","Components/Transforms/Transform2D.js","Components/Figures/Figure.js","Components/Figures/Rectangle/Rectangle.js","Components/Figures/Triangle/Triangle.js","Components/Figures/Ellipse/Ellipse.js","Components/Figures/Hatching/Hatching.js","Components/Figures/Hatching/HHatching/HHatching.js","Components/Figures/Hatching/VHatching/VHatching.js","Components/Figures/Hatching/LOHatching/LOHatching.js","Components/Figures/Hatching/ROHatching/ROHatching.js","Components/Colors/White.js","Components/Placement/Placement.js","Components/InBox/InBox.js","Components/Series/Series.js","Components/Modes/Mode.js","Components/Modes/GridMode/GridMode.js","Components/Modes/GridMode/LinearX/LinearX.js","Components/Placement/Grid/Grid.js","Components/Markov/DraggableCursor.js","Components/Markov/Radar.js","Utils.js","Components/Markov/Markov.js","Components/Void/Void.js","Components/Colors/Red.js","Components/Colors/Orange.js","Components/Colors/Yellow.js","Components/Colors/Green.js","Components/Colors/LightBlue.js","Components/Colors/Blue.js","Components/Figures/Symbols/Symbol.js","Components/Figures/Symbols/Arrow/Arrow.js","Components/Figures/Characters/Character.js","Components/Figures/Characters/Number0.js","Components/Figures/Characters/Number1.js","Components/Log/Log.js","Components/Recursion/Recursion.js","Components/Figures/ThisBox/ThisBox.js","Components/Input/Random/Random.js","Components/Input/Increment/Increment.js","Components/Modes/GridMode/LinearY/LinearY.js","Components/Modes/GridMode/DiagonalLeft/DiagonalLeft.js","Components/Modes/GridMode/DiagonalRight/DiagonalRight.js","Components/Modes/GridMode/Orthogonal/Orthogonal.js","Components/Modes/GridMode/SnailRight/SnailRight.js","Components/Index.js","Containers/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","DEFAULTSTYLE","fillColor","Paper","Color","strokeColor","strokeWidth","transform","Matrix","Canvas","props","undefined","_instance","state","function","width","height","currentFont","observers","reset","svg","getImageData","callback","mimeType","qualityArgument","toBlob","draw","obj","attach","detach","this","_styles","slice","last","length","filename","ext","extension","canvasWidth","window","innerWidth","canvasHeight","innerHeight","CanvasSize","setState","canvas","document","getElementById","_PaperScope","setup","view","onResize","e","windowResized","componentDidUpdate","addEventListener","autoUpdate","updateWorkspace","color","lastStyle","x","y","rect","Path","Rectangle","Point","Size","setPathStyle","ellipse","Ellipse","point","size","x1","y1","x2","y2","line","Line","triangle","RegularPolygon","matrix","prepended","translate","cx","cy","scale","angle","rotate","strokeWeight","weight","text","textObject","PointText","fontFamily","content","justification","Group","segments","path","style","transformMatrixValue","r","g","b","a","f","sk","CalcCanvasSize","resizeCanvas","project","clear","init","notifyAll","push","filter","observer","forEach","receiveNotification","exportSVG","asString","matchShapes","bounds","element","toDataURL","replace","className","id","resize","scaling","translation","rotation","reduce","acc","appended","Component","ContextMenuBox","m","handleClick","map","item","index","icon","getIconClassFromName","type","elements","onClick","data","key","shortid","generate","src","name","title","arrow_right","getMenu","menuItems","menu","suppMenu","concat","holdToDisplay","children","_draggable","_droppables","_draggableIndex","DragManager","clearDroppable","droppableKey","box","target","node","ReactDOM","findDOMNode","refs","previousElementSibling","parent","menuColor","unauthorized","Box","dragEnter","isMinimized","isInfo","transforms","initStateFromSavedState","initState","parentsList","constructor","ref","drawBeforeType","reloadMenu","doBeforeAddChild","isFlexVertical","lastEnter","React","createRef","dropbox","container","contentRect","hasInfo","canMinimize","_id","checkChildrenFromSavedState","indexOf","filteredMenu","hasParent","filterUnauthorized","event","addClassToElement","exceptions","Function","child","i","exception","getClassFromName","functionToCall","object","cl","getFunctionClass","isAuthorized","setChildren","beforeAddChild","pushChild","doBeforeSetChildren","el","callDrawBeforeType","next","saveState","splice","getBoxPlaceHolder","boxToJSON","dropboxRect","current","getBoundingClientRect","minHeight","json","toJSON","dataTransfer","setData","JSON","stringify","effectAllowed","instance","draggable","dropEffect","removeFromParent","types","preventDefault","getDragItemIndex","screenX","screenY","addDroppable","stopPropagation","onDragEnter","parse","getData","insertChild","dragManager","Array","from","split","nodeType","isx","left","isy","top","draggableParent","draggableIndex","c","isNotBlack","formatedColor","formatedTextColor","formatedBackgroundColor","getChildren","getTransforms","renderBox","infoBox","getInfo","doBeforeRender","getColorMenu","onInfo","bind","info","onMinimize","minimize","onClose","cancel","onDragStart","onDragEnd","onDrag","fill","backgroundColor","maxWidth","display","onDrop","onDragOver","onDragLeave","hasReachedLimit","stateToJSON","BoxGroup","drawBeforeChild","pop","Black","menuReset","Workspace","startDrag","addDrawBeforeType","addChild","forceUpdate","getColor","sendDraw","img","createElement","setDragImage","movX","movY","scrollLeft","scrollTop","getInstructions","BoxInputNumber","step","value","parseFloat","exactMath","mul","deltaY","min","max","onChange","onMouseUp","select","onFocus","onWheel","onBlur","removeEventListener","getSelection","empty","removeAllRanges","selection","Save","DownloadName","DownloadNameSaved","DownloadSuffixNumber","jpg","DownloadSuffix","DownloadFormat","zipNumber","downloadImage","nb","dname","blob","Blob","saveAs","console","log","downloadZip","zip","JSZip","file","folder","isSVG","imageData","btoa","base64","self","generateAsync","then","incrementZipNumber","parseInt","decrementZipNumber","burst_mode","arrow_up","arrow_down","defaultChecked","checked","htmlFor","icon_save_alt","Input","input","initFromSavedState","SliderTooltip","Slider","createSliderWithTooltip","SliderBox","defaultValue","marks","padding","trackStyle","borderRadius","railStyle","handleStyle","marginTop","borderColor","dotStyle","bottom","onAfterChange","tipProps","placement","placementTip","tipFormatter","inputMenu","Transform","inputElement","returns","saveTransform","getValue","linkMenuTypes","unlinkMenuTypes","Transform2D","inputElementY","linkMenu","solo","menuX","menuY","inputY","unlinkMenu","Figure","_x","_y","_rotation","_height","_width","_scale","getInputValue","0","1","moveIcon","0.1","1.5","scaleIcon","90","180","270","360","rotateIcon","position","drawFigure","square","setPathTransform","Triangle","Hatching","_density","2","11","21","stroke","noStroke","HHatching","HHatchingIcon","density","gapY","group","j","VHatching","VHatchingIcon","gapX","LOHatching","LOHatchingIcon","ROHatching","ROHatchingIcon","White","Placement","mode","currentMode","superJSON","InBox","Wrapper","Children","authorizedChildren","Child","boxChildren","find","wrapper","Series","currentState","Mode","modes","GridMode","LinearX","rows","columns","lines","column","row","Recursion","Grid","grid_on","elem","30","renderMode","DraggableCursor","isDragging","ratio","onMouseMoveHandler","onMouseMove","onMouseUpHandler","movement","button","vector","radius","minRadius","maxRadius","scalar","movementX","movementY","Math","abs","sign","floor","newRadius","onMouseDown","getCirclePoint","center","elNumber","cos","PI","sin","getCirclePoints","points","Radar","probas","WIDTH","HEIGHT","pins","outerPoints","d","outerD","cursor","vertex","normalize","newProba","landmarks","version","xmlns","viewBox","fix","round","div","clamp","clamp_left","clamp_right","Markov","random","idElement","markovIcon","proba","initProba","CENT","_","result","rand","probaIndex","remaining","p","Utils","radar","header","inputs","iconSelected","intValue","checkProba","getProbas","unknown","Void","voidIcon","Red","Orange","Yellow","Green","LightBlue","Blue","Symbol","Arrow","headLength","tailLength","headAngle","tailAngle","end","start","arrowHead","subtract","arrowTail","p3","p2","add","p4","p1","p5","closed","Character","fontSize","Number0","zero","Number1","one","Log","String","toString","globalRecursion","recursion","nbThisBox","ignoreThisBox","recursionMax","recursionOption","ThisBox","recursionParent","thisIcon","getRecursionDraw","isInThisBoxCall","Random","to","sub","update","arrowLeft","arrowRight","inputOptionsIcons","limited","looped","loopedInverse","Increment","increment","condition","incrementIcon","decrement","InputOptions","selected","onChangeOption","visibility","LinearY","DiagonalLeft","compteur","DiagonalRight","Orthogonal","SnailRight","side","move","toLowerCase","unauthorizedClass","error","toggle","App","aboutClick","handleOutsideClick","aboutContainer","contains","aboutButton","href","rel","icon_git","icon_insta","icon_info","Boolean","location","hostname","match","configure","adapter","Adapter","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.279bf50b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/info.b08ccdbe.svg\";","module.exports = __webpack_public_path__ + \"static/media/next.0f510805.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_leftUI.1fd757d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/unknown.3f5bae44.svg\";","module.exports = __webpack_public_path__ + \"static/media/Github.6d2c7609.svg\";","module.exports = __webpack_public_path__ + \"static/media/Instagram.b862d228.svg\";","module.exports = __webpack_public_path__ + \"static/media/cancel.4afab8b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/minimize.fef1891a.svg\";","module.exports = __webpack_public_path__ + \"static/media/save_alt.3ccde972.svg\";","module.exports = __webpack_public_path__ + \"static/media/burst_mode.38a76e4c.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_upUI.d8be3f88.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_downUI.f06acfc6.svg\";","module.exports = __webpack_public_path__ + \"static/media/scale.08ae3836.svg\";","module.exports = __webpack_public_path__ + \"static/media/rotate_left.8e50c66d.svg\";","module.exports = __webpack_public_path__ + \"static/media/move.a4f49321.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_square.c61ab8ee.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_triangle.288a2239.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_ellipse.61cb41c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/HHatching.f3da2da9.svg\";","module.exports = __webpack_public_path__ + \"static/media/VHatching.c8766020.svg\";","module.exports = __webpack_public_path__ + \"static/media/LOHatching.186b393d.svg\";","module.exports = __webpack_public_path__ + \"static/media/ROHatching.8c0092fd.svg\";","module.exports = __webpack_public_path__ + \"static/media/grid_on.8ace643b.svg\";","module.exports = __webpack_public_path__ + \"static/media/markov.fd9fdcc8.svg\";","module.exports = __webpack_public_path__ + \"static/media/void.a2a55d7b.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_right.992a373b.svg\";","module.exports = __webpack_public_path__ + \"static/media/zero.691bc513.svg\";","module.exports = __webpack_public_path__ + \"static/media/one.73ed8e62.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter.a3d9c337.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter_none.c08263ce.svg\";","module.exports = __webpack_public_path__ + \"static/media/my_location.0347ed20.svg\";","module.exports = __webpack_public_path__ + \"static/media/dice.102c7491.svg\";","module.exports = __webpack_public_path__ + \"static/media/increment.7577ef8f.svg\";","module.exports = __webpack_public_path__ + \"static/media/decrement.e85eef12.svg\";","module.exports = __webpack_public_path__ + \"static/media/repeat.2f92b96d.svg\";","module.exports = __webpack_public_path__ + \"static/media/sync_alt.5937dafc.svg\";","module.exports = __webpack_public_path__ + \"static/media/trending_flat.aaf3d874.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_rightUI.79443cdd.svg\";","import React, { Component } from 'react';\r\nimport './Canvas.css';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from 'paper';\r\n\r\nconst DEFAULTSTYLE = {\r\n  fillColor: new Paper.Color(0, 0, 0, 1),\r\n  strokeColor: new Paper.Color(0, 0, 0, 1),\r\n  strokeWidth: 0,\r\n  transform: new Paper.Matrix()\r\n}\r\n\r\nclass Canvas extends Component {\r\n\r\n  /*Singleton*/\r\n  static _instance;\r\n  static _PaperScope;\r\n\r\n  static getImageData(svg = false) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance.getImageData(svg);\r\n    }\r\n  }\r\n\r\n  static toBlob(callback, mimeType = 'image/png', qualityArgument = 0.80) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance.toBlob(callback, mimeType, qualityArgument);\r\n    }\r\n  }\r\n\r\n  static draw() {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.draw();\r\n    }\r\n  }\r\n\r\n  static attach(obj) {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.attach(obj);\r\n    }\r\n  }\r\n\r\n  static detach(obj) {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.detach(obj);\r\n    }\r\n  }\r\n\r\n  state = {\r\n    function: undefined,\r\n    width: 0,\r\n    height: 0\r\n  };\r\n\r\n  constructor(props) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance;\r\n    }\r\n    super(props);\r\n    this.currentFont = null;\r\n    this.observers = [];\r\n    this.reset();\r\n\r\n    Canvas._instance = this;\r\n  }\r\n\r\n  get lastStyle() {\r\n    return this._styles[this._styles.length - 1];\r\n  }\r\n\r\n  get fillColor() {\r\n    return this.lastStyle.fillColor;\r\n  }\r\n\r\n  get strokeColor() {\r\n    return this.lastStyle.strokeColor;\r\n  }\r\n\r\n  get strokeWidth() {\r\n    return this.lastStyle.strokeWidth;\r\n  }\r\n\r\n  get scaleValue() {\r\n    return this.transformMatrixValue.scaling;\r\n  }\r\n\r\n  get translateValue() {\r\n    return this.transformMatrixValue.translation;\r\n  }\r\n\r\n  get rotateValue() {\r\n    return  this.transformMatrixValue.rotation;\r\n  }\r\n\r\n  get transformMatrixValue() {\r\n    return this._styles.reduce((acc, {transform}) => acc.appended(transform), new Paper.Matrix());\r\n  }\r\n\r\n  get width() {\r\n    return this.state.width;\r\n  }\r\n\r\n  get height() {\r\n    return this.state.height;\r\n  }\r\n\r\n  pop() {\r\n    this._styles = this._styles.slice(0, -1);\r\n  }\r\n\r\n  push() {\r\n    const last = this._styles[this._styles.length - 1];\r\n    this._styles = [...this._styles, {\r\n      ...DEFAULTSTYLE,\r\n      strokeWidth: last.strokeWidth,\r\n      strokeColor: last.strokeColor,\r\n      fillColor: last.fillColor\r\n    }];\r\n  }\r\n\r\n  setfilename(filename, ext = undefined) {\r\n    this.filename = filename;\r\n    if(ext !== undefined) this.extension = ext;\r\n  }\r\n\r\n  CalcCanvasSize() {\r\n    let canvasWidth = window.innerWidth*0.5-60;\r\n    let canvasHeight = window.innerHeight-180;\r\n    let CanvasSize = (canvasWidth < canvasHeight) ? canvasWidth : canvasHeight;\r\n    this.setState({width: CanvasSize, height: CanvasSize});\r\n  }\r\n\r\n  init() {\r\n    let self = this;\r\n\r\n    let canvas = document.getElementById('canvas');\r\n    Canvas._PaperScope = Paper.setup(canvas);\r\n    Paper.view.onResize = (e) => {\r\n      this.windowResized(canvas);\r\n      this.componentDidUpdate();\r\n    }\r\n    window.addEventListener('resize', (e) => {\r\n      this.windowResized(canvas);\r\n      this.componentDidUpdate();\r\n    });\r\n    Paper.view.autoUpdate = false;\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  fill(color) {\r\n    this.lastStyle.fillColor = color;\r\n  }\r\n\r\n  rect(x, y, width, height) {\r\n    let rect = new Paper.Path.Rectangle(new Paper.Point(x, y), new Paper.Size(width, height));\r\n    this.setPathStyle(rect);\r\n    return rect;\r\n  }\r\n\r\n  ellipse(x, y, width, height) {\r\n    let ellipse = new Paper.Path.Ellipse({\r\n      point: new Paper.Point(x, y),\r\n      size: new Paper.Size(width, height)\r\n    });\r\n    this.setPathStyle(ellipse);\r\n    return ellipse;\r\n  }\r\n\r\n  line(x1, y1, x2, y2) {\r\n    let line = new Paper.Path.Line(new Paper.Point(x1, y1), new Paper.Point(x2, y2));\r\n    this.setPathStyle(line);\r\n    return line;\r\n  }\r\n\r\n  triangle(x, y, width) {\r\n    let triangle = new Paper.Path.RegularPolygon(new Paper.Point(x + width / 2, y + width / 2), 3, width / 2);\r\n    this.setPathStyle(triangle);\r\n    return triangle;\r\n  }\r\n\r\n  translate(x, y = x) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.prepended(matrix.translate(x, y));\r\n  }\r\n\r\n  scale(x, y = x, cx = 0, cy = cx) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.prepended(matrix.scale(x, y, new Paper.Point(cx, cy)));\r\n  }\r\n\r\n  rotate(angle, cx = 0, cy = cx) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.prepended(matrix.rotate(-angle, new Paper.Point(cx, cy)));\r\n  }\r\n\r\n  noStroke() {\r\n    this.strokeWeight(0);\r\n  }\r\n\r\n  strokeWeight(weight) {\r\n    this.lastStyle.strokeWidth = weight;\r\n  }\r\n\r\n  stroke(color) {\r\n    if(this.lastStyle.strokeWidth === 0) this.strokeWeight(1);\r\n    this.lastStyle.strokeColor = color;\r\n  }\r\n\r\n  text(text, x, y) {\r\n    let textObject = new Paper.PointText(new Paper.Point(x, y));\r\n    textObject.fontFamily = 'Space Grotesk';\r\n    textObject.content = text;\r\n    textObject.justification = 'center';\r\n    this.setPathStyle(textObject);\r\n    return textObject;\r\n  }\r\n\r\n  textSize(size) {\r\n\r\n  }\r\n\r\n  group() {\r\n    return new Paper.Group();\r\n  }\r\n\r\n  path(segments) {\r\n    let path = new Paper.Path(segments);\r\n    this.setPathStyle(path);\r\n    return path;\r\n  }\r\n\r\n  setPathStyle(path) {\r\n    path.style = {\r\n      fillColor: this.fillColor,\r\n      strokeWidth: this.strokeWidth,\r\n      strokeColor: this.strokeColor\r\n    };\r\n  }\r\n\r\n  setPathTransform(path) {\r\n    /*path.rotate(-this.rotateValue);\r\n    path.scale(this.scaleValue.width, this.scaleValue.height);\r\n    path.translate(this.translateValue);*/\r\n    path.transform(this.transformMatrixValue);\r\n  }\r\n\r\n  color(r, g, b, a) {\r\n    return new Paper.Color(r, g, b, a);\r\n  }\r\n\r\n  sendDraw(f) {\r\n    this.setState({\r\n      function: f\r\n    });\r\n  }\r\n\r\n  resetDraw() {\r\n    this.setState({\r\n      function: undefined\r\n    });\r\n  }\r\n\r\n  windowResized(sk) {\r\n    this.CalcCanvasSize();\r\n    this.resizeCanvas(sk);\r\n  }\r\n\r\n  resizeCanvas(sk) {\r\n    sk.width = this.state.width\r\n    sk.height = this.state.height\r\n  }\r\n\r\n  draw() {\r\n    Paper.project.clear();\r\n    this.reset();\r\n    let f = this.state.function;\r\n    if(f !== undefined) {\r\n      f(this);\r\n    }\r\n    Paper.view.draw();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.CalcCanvasSize();\r\n    this.init();\r\n  }\r\n\r\n  reset() {\r\n    this._styles = [{...DEFAULTSTYLE}];\r\n    this.notifyAll();\r\n  }\r\n\r\n  attach(obj) {\r\n    this.observers.push(obj);\r\n  }\r\n\r\n  detach(obj) {\r\n    this.observers = this.observers.filter((observer) => observer !== obj);\r\n  }\r\n\r\n  notifyAll() {\r\n    this.observers.forEach((observer) => {\r\n      observer.receiveNotification();\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.draw();\r\n  }\r\n\r\n  getImageData(svg = false) {\r\n    if(svg) {\r\n      return Canvas._PaperScope.project.exportSVG({\r\n        asString: true,\r\n        matchShapes: true,\r\n        bounds: new Paper.Rectangle(new Paper.Point(0, 0), new Paper.Size(this.width, this.height))\r\n      });\r\n    } else {\r\n      const canvas = Canvas._PaperScope.project.view.element;\r\n      return canvas.toDataURL('image/png').replace(/^data:image\\/(png|jpg);base64,/, '');\r\n    }\r\n  }\r\n\r\n  toBlob(callback, mimeType = 'image/png', qualityArgument = 0.80) {\r\n    const canvas = Canvas._PaperScope.project.view.element;\r\n    canvas.toBlob(callback, mimeType, qualityArgument);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"canvasContainer\">\r\n        <div id=\"renderer\">\r\n          <canvas id=\"canvas\" width={this.state.width} height={this.state.height} resize=\"true\"/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCanvas._instance = undefined;\r\nCanvas._PaperScope = undefined;\r\n\r\n/*PropTypes*/\r\nCanvas.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  cells: PropTypes.number\r\n}\r\n\r\nexport default Canvas;\r\n","import React, { Component } from 'react';\r\nimport './ContextMenuBox.css';\r\nimport { ContextMenu, MenuItem, SubMenu, ContextMenuTrigger } from \"react-contextmenu\";\r\nimport shortid from 'shortid';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport arrow_right from '../../Icons/arrow_rightUI.svg';\r\n\r\n\r\n\r\nclass ContextMenuBox extends Component {\r\n  state = {};\r\n\r\n  getMenu(m, handleClick) {\r\n    return m.map(\r\n      (item, index) => {\r\n        let icon = window.getIconClassFromName(item.type);\r\n        if (item.elements === undefined || item.elements.length === 0) {\r\n          return (<MenuItem onClick={handleClick} data={{ type: item.type}} key={shortid.generate()}>\r\n            {icon && <span className=\"react-contextmenu-itemIcon\"><SVG src={icon}/></span>}\r\n            <span className=\"react-contextmenu-itemText\">{item.name ? item.name : item.type}</span>\r\n          </MenuItem>);\r\n        } else {\r\n          return (<SubMenu key={shortid.generate()} title={\r\n            <>\r\n              <span  className=\"react-contextmenu-itemLabel\">\r\n              {icon && <span className=\"react-contextmenu-itemIcon\"><SVG src={icon}/></span>}\r\n              <span className=\"react-contextmenu-itemText\">{item.name ? item.name : item.type}</span>\r\n              </span>\r\n              <span className=\"react-contextmenu-itemIcon\"><SVG src={arrow_right}/></span>\r\n            </>\r\n          }>\r\n              {this.getMenu(item.elements, handleClick)}\r\n              <span className='react-contextmenu-borderTop'></span>\r\n          </SubMenu>);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n\r\n    let menuItems = [];\r\n\r\n    for(let key in this.props.menu) {\r\n      let suppMenu = this.props.menu[key];\r\n      if( suppMenu.menu && suppMenu.handleClick ) {\r\n        menuItems = menuItems.concat(this.getMenu(suppMenu.menu, suppMenu.handleClick));\r\n      }\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <ContextMenuTrigger id={this.props.id} holdToDisplay={-1}>\r\n            {this.props.children}\r\n        </ContextMenuTrigger>\r\n        {(menuItems.length > 0) && <ContextMenu id={this.props.id}>\r\n\r\n            {menuItems}\r\n          <span className='react-contextmenu-borderTop'></span>\r\n        </ContextMenu>}\r\n      </>\r\n    );\r\n\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default ContextMenuBox;\r\n","class Color {\r\n\r\n  constructor(r = 0, g = 0, b = 0, a = 255) {\r\n    this.r = r;\r\n    this.g = g;\r\n    this.b = b;\r\n    this.a = a;\r\n  }\r\n\r\n  getColor(sk) {\r\n    return sk.color(this.r / 255, this.g / 255, this.b / 255, this.a / 255);\r\n  }\r\n\r\n}\r\n\r\nColor.className = \"Color\";\r\n\r\nexport default Color;\r\n","import ReactDOM from 'react-dom';\r\n\r\nlet _draggable = null;\r\nlet _droppables = {};\r\nlet _draggableIndex = 0;\r\n\r\nclass DragManager {\r\n    static _instance = null;\r\n    \r\n    static get instance() {\r\n        if(this._instance === null) {\r\n            this._instance = new DragManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    set draggable(target) {\r\n        _draggable = target;\r\n        let node = ReactDOM.findDOMNode(target.refs.box);\r\n        while((node = node.previousElementSibling) != null) {\r\n            _draggableIndex++;\r\n        }\r\n    }\r\n\r\n    get draggableParent() {\r\n        return _draggable.props.parent;\r\n    }\r\n\r\n    get draggableIndex() {\r\n        return _draggableIndex;\r\n    }\r\n\r\n    clear() {\r\n        _draggable = null;\r\n        this.clearDroppable();\r\n        _draggableIndex = 0;\r\n    }\r\n\r\n    clearDroppable() {\r\n        for(let droppableKey in _droppables) {\r\n            let droppable = _droppables[droppableKey];\r\n        }\r\n        _droppables = {};\r\n    }\r\n\r\n    addDroppable(box) {\r\n        _droppables[box.props.id] = box;\r\n    }\r\n}\r\n\r\nexport default DragManager;","import React, { Component } from 'react';\r\nimport './Box.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport { ContextMenuTrigger } from \"react-contextmenu\";\r\nimport Color from '../Colors/Color';\r\nimport DragManager from '../../DragManager';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport cancel from '../../Icons/cancel.svg';\r\nimport minimize from '../../Icons/minimize.svg';\r\nimport info from '../../Icons/info.svg';\r\n\r\n// Constant Contextual Menu\r\nconst menu = [\r\n  {\r\n    type: 'Placement',\r\n    elements: [\r\n      {\r\n        type: 'Grid'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Elements',\r\n    elements: [\r\n      {\r\n        name: 'Basic Shapes',\r\n        type: 'Rectangle',\r\n        elements: [\r\n          {\r\n            type: 'Rectangle'\r\n          },\r\n          {\r\n            type: 'Triangle'\r\n          },\r\n          {\r\n            type: 'Ellipse'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        type: 'HHatching',\r\n        name: 'Hatching',\r\n        elements: [\r\n          {\r\n            type: 'HHatching',\r\n            name: 'Horizontal'\r\n          },\r\n          {\r\n            type: 'VHatching',\r\n            name: 'Vertical'\r\n          },\r\n          {\r\n            type: 'LOHatching',\r\n            name: 'Left Oblique'\r\n          },\r\n          {\r\n            type: 'ROHatching',\r\n            name: 'Right Oblique'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        name: 'Characters',\r\n        type: 'Character',\r\n        elements: [\r\n          {\r\n            type: 'Zero',\r\n            name: 'Zero'\r\n          },\r\n          {\r\n            type: 'One',\r\n            name: 'One'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        type: 'Arrow'\r\n      },\r\n      {\r\n        type: 'Void'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Markov'\r\n  },\r\n  {\r\n    type: 'Recursion'\r\n  }\r\n];\r\n\r\n\r\n// Constant Color Menu\r\nconst menuColor = [\r\n  {\r\n    type: 'Color',\r\n    elements: [\r\n      {type: 'Black'},\r\n      {type: 'White'},\r\n      {type: 'Red'},\r\n      {type: 'Orange'},\r\n      {type: 'Yellow'},\r\n      {type: 'Green'},\r\n      {type: 'LightBlue'},\r\n      {type: 'Blue'}\r\n    ]\r\n  }\r\n];\r\n\r\nconst className = \"Box\";\r\n\r\n// Constant unauthorized box as child\r\nconst unauthorized = [];\r\n\r\n/**\r\n * Returns a callback function depends on the class of the box\r\n * @param {Box} child - The child of the box \r\n * @param {Object} object - The object containing the callback as {boxClassname: callback}\r\n * @return {Function|undefined} the callback function for the type\r\n */\r\nfunction getFunctionClass(child, object) {\r\n  for(let key in object) {\r\n    const cl = window.getClassFromName(key);\r\n    if(!cl) return undefined;\r\n    const instanceOfChild = new child();\r\n    if(instanceOfChild instanceof cl) {\r\n      return object[key];\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Class basis for all Box\r\n * @extends Component\r\n */\r\nclass Box extends Component {\r\n\r\n  /**\r\n   * Get the id of the box\r\n   * @return {number} the id of the box\r\n   */\r\n  static get id() {\r\n    return Box._id++;\r\n  }\r\n\r\n  /**\r\n   * get the className of the class\r\n   * @return {string} the name of the class\r\n   */\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  /**\r\n   * get the class icon\r\n   * @return {*} Icon of the class\r\n   */\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * get the unauthorized box for the class\r\n   * @return {string[]} array - names of the unauthorized box class\r\n   */\r\n  static get unauthorized() {\r\n    return unauthorized;\r\n  }\r\n\r\n  // STATE\r\n  state = {\r\n    children: [],\r\n    dragEnter: -1,\r\n    isMinimized: false,\r\n    isInfo: false,\r\n    transforms: {}\r\n  };\r\n\r\n  /**\r\n   * Create the Box\r\n   * @param {*} props - React props\r\n   */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Check if there are saved datas\r\n    if(props && this.props.state) {\r\n      this.state = this.props.state;\r\n      this.initStateFromSavedState();\r\n    } else {\r\n      this.initState();\r\n    }\r\n\r\n    // For allowing ThisBox only in Recursion box\r\n    this.parentsList = this.props ? {...this.props.parentsList, [this.constructor.className]: true} : {[this.constructor.className]: true};\r\n    \r\n    // Reference of this box. Useful for getting children from ReactElement\r\n    this.ref = this;\r\n    \r\n    // For transforms inputs\r\n    this.transforms = {};\r\n\r\n    // Final ClassName of this box\r\n    this.className = Box.className;\r\n    \r\n    // object containing callback for each box type. To be called before drawing\r\n    this.drawBeforeType = {};\r\n\r\n    // init Contextual Menu\r\n    this.reloadMenu();\r\n    \r\n    // for supplementary menu\r\n    this.suppMenu = [];\r\n\r\n    // object containing callback for each box type. To be called before adding child\r\n    this.doBeforeAddChild = {};\r\n\r\n    // if the dragging is done vertically\r\n    this.isFlexVertical = true;\r\n\r\n    // Last dragged in Element\r\n    this.lastEnter = null;\r\n\r\n    // Refs\r\n    this.content = React.createRef();\r\n    this.dropbox = React.createRef();\r\n    this.container = React.createRef();\r\n\r\n    // Dimensions of the content of the box\r\n    this.contentRect = {height: 0, width: 0};\r\n\r\n    // This box has info ?\r\n    this.hasInfo = false;\r\n\r\n    // This box can minimize ?\r\n    this.canMinimize = true;\r\n  }\r\n\r\n  /**\r\n   * Init the state from saved data\r\n   */\r\n  initStateFromSavedState() {\r\n    const {r, g, b, a} = this.state.color;\r\n    this.state.color = new Color(r, g, b, a);\r\n    this.state = Box.checkChildrenFromSavedState(this.state);\r\n  }\r\n\r\n  /**\r\n   * Check if the box has parent from classname\r\n   * @param {string} className - classname of the parent \r\n   * @return {bool} hasParent from the classname \r\n   */\r\n  hasParent(className) {\r\n    return this.parentsList[className];\r\n  }\r\n\r\n  /**\r\n   * Init children state from saved state\r\n   * @param {State} state - saved state\r\n   * @return {State} updated state\r\n   */\r\n  static checkChildrenFromSavedState(state) {\r\n    if(state === undefined) return state;\r\n    if(state.children !== undefined && state.children.length > 0) {\r\n      return {\r\n        ...state,\r\n        children: state.children.map(({type, id, state}) => {\r\n          if(typeof type === 'string') {\r\n            return {type: window.getClassFromName(type), id, state: Box.checkChildrenFromSavedState(state)};\r\n          } else {\r\n            return {type, id, state};\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return {...state};\r\n  }\r\n\r\n  /**\r\n   * Filter the unauthorized box for Contextual Menu\r\n   * @param {Menu} menu - Menu to filter\r\n   * @return {Menu} filtered menu\r\n   */\r\n  filterUnauthorized(menu) {\r\n    if(this.constructor.unauthorized.indexOf('*') !== -1) {\r\n      return [];\r\n    }\r\n    const filteredMenu = menu.filter((item) => this.constructor.unauthorized.indexOf(item.type) === -1);\r\n    if(this.hasParent('Recursion')) {\r\n      return [...filteredMenu, {type: 'ThisBox'}];\r\n    }\r\n    return filteredMenu;\r\n  }\r\n\r\n  /**\r\n   * Reload the contextual menu object\r\n   */\r\n  reloadMenu() {\r\n    this.menu = [\r\n      {\r\n        menu: this.filterUnauthorized(menu),\r\n        handleClick: (event, data) =>  {\r\n          if(data.type !== undefined) {\r\n            window.addClassToElement(data.type, this);\r\n          }\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Init the state\r\n   */\r\n  initState() {\r\n    this.state.color = new Color(255, 255, 255);\r\n    this.state.scale = {x: 1, y: 1};\r\n  }\r\n\r\n  /**\r\n   * Called before set children\r\n   * TO OVERRIDE\r\n   * @param {*} children \r\n   * @return {Object} Object containing modified children\r\n   */\r\n  doBeforeSetChildren(children) {\r\n    return {children};\r\n  }\r\n\r\n  /**\r\n   * Add a function callback to drawBeforeType\r\n   * @param {string} type - type of the box\r\n   * @param {Function} f - callback function\r\n   * @param {string[]} exceptions - Exceptions for some derived type \r\n   */\r\n  addDrawBeforeType(type, f, exceptions = []) {\r\n    if(!(f instanceof Function)) return;\r\n    if(!this.drawBeforeType[type]) {\r\n      this.drawBeforeType[type] = [{callback: f, exceptions}];\r\n    } else {\r\n      this.drawBeforeType[type].push({callback: f, exceptions});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call the function callback in drawBeforeType if type match\r\n   * @param {Canvas} sk - Canvas object\r\n   * @param {string} type - Type of the box \r\n   * @param {BoxClass} child - Box Class to check\r\n   */\r\n  callDrawBeforeType(sk, type, child) {\r\n    for(let i = 0; i < this.drawBeforeType[type].length; ++i) {\r\n      const isException = this.drawBeforeType[type][i].exceptions.reduce((acc, exception) => acc || child instanceof window.getClassFromName(exception), false);\r\n      if(isException) {\r\n        continue;\r\n      }\r\n      this.drawBeforeType[type][i].callback(sk);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call the callback for the BoxClass to add.\r\n   * It can be useful to wrap the BoxClass by another\r\n   * @param {BoxClass} child - BoxClass to add\r\n   * @return {BoxClass} the BoxClass\r\n   */\r\n  beforeAddChild(child) {\r\n    const functionToCall = getFunctionClass(child, this.doBeforeAddChild);\r\n\r\n    if(functionToCall instanceof Function) {\r\n      return functionToCall(child);\r\n    } else {\r\n      return child;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a child to this box\r\n   * @param {BoxClass} child - BoxClass to add \r\n   */\r\n  addChild(child) {\r\n    if(!child) return;\r\n    let obj = new child(); //tricky\r\n    if(obj instanceof Box && this.isAuthorized(child)) {\r\n      this.setChildren([{type:this.beforeAddChild(child), id:Box.id}]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Push a child in the chidren list of this box\r\n   * For a simple Box, the children are the child\r\n   * @param {Box} child - Box Object\r\n   */\r\n  pushChild(child) {\r\n    if(!child || !child.type || !child.id) return;\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      this.setChildren([child]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Insert child in the children list of this box\r\n   * If not BoxGroup, the index must be 0\r\n   * @param {Box} child - Box Object\r\n   * @param {int} index - The index of the child\r\n   */\r\n  insertChild(child, index = 0) {\r\n    this.pushChild(child);\r\n  }\r\n\r\n  /**\r\n   * Set Children State\r\n   * @param {Box} children - Box Object\r\n   */\r\n  setChildren(children) {\r\n    this.setState(this.doBeforeSetChildren(children));\r\n  }\r\n\r\n  /**\r\n   * Check if the Class is authorized in this box\r\n   * @param {Class} cl - BoxClass\r\n   */\r\n  isAuthorized(cl) {\r\n    const unauthorized = this.constructor.unauthorized;\r\n    return window.isAuthorized(cl, unauthorized);\r\n  }\r\n\r\n  /**\r\n   * Remove this box from its parent\r\n   */\r\n  removeFromParent() {\r\n    let children = this.props.parent.state.children;\r\n    children = children.filter(el => el.id !== this.props.id);\r\n    this.props.parent.setChildren(children);\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  /**\r\n   * Call the callback before drawing the Box\r\n   * @param {Canvas} sk - Canvas object\r\n   * @param {Box} child - Box to draw\r\n   */\r\n  drawBeforeChild(sk, child) {\r\n    if(!child) return;\r\n    for(let key in this.drawBeforeType) {\r\n      if(child instanceof window.getClassFromName(key)) {\r\n        this.callDrawBeforeType(sk, key, child);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method to implement for drawing this Box\r\n   * TO OVERRIDE\r\n   * @param {Canvas} sk - Canvas object (Visitor) \r\n   */\r\n  draw(sk) {\r\n    // VOID\r\n  }\r\n\r\n  /**\r\n   * Get the ReactElement derived from Box and children of this box.\r\n   * @return {ReactElement} the ReactElements obtained from Box\r\n   */\r\n  getChildren() {\r\n    this.next = undefined;\r\n    let children = [];\r\n\r\n    if(this.state.children.length > 0) {\r\n      let child = this.state.children[0];\r\n      children.push(<child.type key={child.id} parentsList={this.parentsList} parent={this} id={child.id} ref={el => {this.next = el ? el.ref : null;}} saveState={(state) => {child.state = state}} state={child.state}/>);\r\n    }\r\n\r\n    if(this.state.dragEnter >= 0) {\r\n      children.splice(this.state.dragEnter, 0, this.getBoxPlaceHolder());\r\n    }\r\n\r\n    return children;\r\n  }\r\n\r\n  /**\r\n   * Render the special parameters of this box\r\n   * @return {ReactElement} React Element\r\n   */\r\n  renderBox() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get the JSON data conversion of the class\r\n   * @param {*} constructor - constructor class\r\n   * @param {*} state - state to convert\r\n   * @param {*} id - id of the box\r\n   * @return {Object} JSON data conversion of the class\r\n   */\r\n  static boxToJSON(constructor, state, id = Box.id) {\r\n    return {type: constructor.className, id: id, state: Box.stateToJSON(state)};\r\n  }\r\n\r\n  /**\r\n   * Get the JSON data conversion of this box\r\n   * @return JSON data conversion of this box\r\n   */\r\n  toJSON() {\r\n    return this.constructor.boxToJSON(this.constructor, this.state);\r\n  }\r\n\r\n  /**\r\n   * Get the JSON data converted from the state\r\n   * @param {State} state - state of the box \r\n   * @return {Object} the converted state\r\n   */\r\n  static stateToJSON(state) {\r\n    if(state === undefined) return state;\r\n    if(state.children !== undefined && state.children.length > 0) {\r\n      return {...state, children: state.children.map(({type, id, state}) => type.boxToJSON(type, state, id))};\r\n    }\r\n    return {...state};\r\n  }\r\n\r\n  /**\r\n   * Get the transform parameters of this box\r\n   * @return {ReactElement} the transform parameters of this box\r\n   */\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get the BoxPlaceHolder for drag&drop\r\n   * @return {ReactElement} the BoxPlaceHolder\r\n   */\r\n  getBoxPlaceHolder() {\r\n    const dropboxRect = this.dropbox.current.getBoundingClientRect();\r\n    return <div className=\"BoxPlaceHolder PlaceHolder\" key='ph20' style={{minHeight: dropboxRect.height ? dropboxRect.height : ''}}><p>The Box will replace the content</p></div>;\r\n  }\r\n\r\n  /**\r\n   * Get the color menu of this box\r\n   * @return {Menu} the color menu\r\n   */\r\n  getColorMenu() {\r\n    const colorMenu = [\r\n      {\r\n        menu: menuColor,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            let color = window.getClassFromName(data.type);\r\n            if(color) this.setState({color: new color()});\r\n            window.updateWorkspace();\r\n          }\r\n        }\r\n      }\r\n    ];\r\n\r\n    return colorMenu;\r\n  }\r\n\r\n  /**\r\n   * React Method called after update\r\n   */\r\n  componentDidUpdate() {\r\n    const {saveState} = this.props;\r\n    if(saveState) {\r\n      saveState(this.state);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start Dragging the Box. Convert the box to json for data transmission\r\n   * @param {Event} e - Drag Event\r\n   */\r\n  onDragStart(e) {\r\n    const json = this.toJSON();\r\n    e.dataTransfer.setData(this.constructor.className, JSON.stringify(json));\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    DragManager.instance.draggable = this;\r\n  }\r\n\r\n  /**\r\n   * End Dragging the box. If successful, remove the original box from parent\r\n   * @param {Event} e - Drag Event \r\n   */\r\n  onDragEnd(e) {\r\n    if(e.dataTransfer.dropEffect === 'move') {\r\n      this.removeFromParent();\r\n    }\r\n    //e.dataTransfer.clearData();\r\n    DragManager.instance.clear();\r\n  }\r\n\r\n  /**\r\n   * Start Dragging over the box. If the dragged box is authorized, get its placeholder index\r\n   * @param {*} e - Drag Event\r\n   */\r\n  onDragEnter(e) {\r\n    const last = e.dataTransfer.types.length - 1;\r\n    if(last >= 0 && this.isAuthorized(e.dataTransfer.types[last])) {\r\n      e.preventDefault();\r\n      e.dataTransfer.dropEffect = \"move\";\r\n      const index = this.getDragItemIndex(e.screenX, e.screenY);\r\n      \r\n      if(index !== this.state.dragEnter) {\r\n        this.setState({dragEnter: index});\r\n      }\r\n      this.lastEnter = e.target;\r\n      DragManager.instance.addDroppable(this);\r\n    } else {\r\n      e.dataTransfer.dropEffect = \"none\";\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Called during Dragging the box.\r\n   * @param {*} e - Drag Event\r\n   */\r\n  onDrag(e) {\r\n\r\n  }\r\n\r\n  /**\r\n   * End Dragging over the box. Reset the PlaceHolder index\r\n   * @param {*} e - Drag Event\r\n   */\r\n  onDragLeave(e) {\r\n    if(e.target === this.lastEnter && this.state.dragEnter >= 0) {\r\n      this.setState({dragEnter: -1});\r\n      this.lastEnter = null;\r\n    }\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Called during Dragging over the box\r\n   * @param {*} e  - Drag Event\r\n   */\r\n  onDragOver(e) {\r\n    this.onDragEnter(e);\r\n  }\r\n\r\n  /**\r\n   * Dropping in this box. Insert the new child inside of it\r\n   * @param {*} e - Drag Event\r\n   */\r\n  onDrop(e) {\r\n\r\n    const last = e.dataTransfer.types.length - 1;\r\n    if(last < 0) return false;\r\n\r\n    const json = JSON.parse(e.dataTransfer.getData(e.dataTransfer.types[last]));\r\n    this.insertChild({type: window.getClassFromName(json.type), id: json.id, state: json.state}, this.state.dragEnter);\r\n    this.setState({dragEnter: -1}, () => {window.updateWorkspace()});\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Get Placeholder index from cursor position\r\n   * @param {number} x - cursor x-position\r\n   * @param {number} y - cursor y-position\r\n   * @return {int} the placeholder index \r\n   */\r\n  getDragItemIndex(x, y) {\r\n    const container = this.container.current;\r\n    let index = 0;\r\n    const dragManager = DragManager.instance;\r\n\r\n    let children = Array.from(container.children).filter((child) => {\r\n      const className = child.className.split(' ');\r\n      return className.indexOf(\"Box\") !== -1 || className.indexOf(\"BoxGroup\") !== -1;\r\n    });\r\n\r\n    for(let child of children) {\r\n      if(child.nodeType === 1) {\r\n        const box = child.getBoundingClientRect();\r\n        const isx = ( x < ( box.left + box.width / 2 ) );\r\n        const isy = ( y < ( box.top + box.height ) );\r\n        if((!this.isFlexVertical && isx) || (this.isFlexVertical && isy)) {\r\n          break;\r\n        }\r\n        index++;\r\n      }\r\n    }\r\n\r\n    // No Placeholder if next to the dragged box\r\n    if(dragManager.draggableParent === this && (index === dragManager.draggableIndex || index - 1 === dragManager.draggableIndex)) {\r\n      index = -1;\r\n    }\r\n\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * OnClick Close Event. By default, remove the box from parent\r\n   */\r\n  onClose() {\r\n    this.removeFromParent();\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  /**\r\n   * OnClick Minimize Event. By default, minimize the box\r\n   */\r\n  onMinimize() {\r\n    this.setState({isMinimized: !this.state.isMinimized, isInfo: false});\r\n  }\r\n\r\n  /**\r\n   * OnClick Info Event. By default, show the informations of this box\r\n   */\r\n  onInfo() {\r\n    this.contentRect = this.content.current ? this.content.current.getBoundingClientRect() : {height: 0, width: 0};\r\n    this.setState({isInfo: !this.state.isInfo});\r\n  }\r\n\r\n  /**\r\n   * Get the informations as React Elements of this box\r\n   * @return {ReactElement} React Element\r\n   */\r\n  getInfo() {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Method called before render the box\r\n   * TO OVERRIDE\r\n   */\r\n  doBeforeRender() {\r\n    // Void\r\n  }\r\n\r\n  /**\r\n   * Check if the maximum children length is reached\r\n   * Actually, there is no maximum for the BoxGroup\r\n   * @return {bool} hasReachedLimit\r\n   */\r\n  hasReachedLimit() {\r\n    return !!this.state.children.length;\r\n  }\r\n\r\n  /**\r\n   * React render method\r\n   */\r\n  render() {\r\n    let c = this.state.color;\r\n    let isNotBlack = (c.r+c.g+c.b !== 0);\r\n    let formatedColor = \"rgba(\"+c.r+\", \"+c.g+\", \"+c.b+\", \"+c.a/255+\")\";\r\n    let formatedTextColor = (isNotBlack) ? formatedColor : \"rgba(255, 255, 255, 1)\";\r\n    let formatedBackgroundColor = (isNotBlack) ? \"rgba(0, 0, 0, 1)\" : \"rgba(255, 255, 255, 1)\" ;\r\n\r\n    const icon = this.constructor.icon;\r\n\r\n    const children = this.getChildren();\r\n    const transforms = this.getTransforms();\r\n    const box = this.renderBox();\r\n    const infoBox = this.getInfo();\r\n\r\n    this.doBeforeRender();\r\n\r\n    return (\r\n      <div className={this.className} ref='box'>\r\n        <ContextMenuBox id={this.constructor.className + this.props.id} menu={[...this.menu, ...this.getColorMenu(), ...this.suppMenu]}>\r\n          <div className=\"Box__wrapper\">\r\n            <div className=\"Box_titleOptions\">\r\n              {this.hasInfo && !this.state.isMinimized && <span className=\"Box__titleOption\" onClick={this.onInfo.bind(this)}>\r\n                <SVG src={info}/>\r\n              </span>}\r\n              {this.canMinimize && <span className=\"Box__titleOption\" onClick={this.onMinimize.bind(this)}>\r\n                  <SVG src={minimize}/>\r\n              </span>}\r\n              <span className=\"Box__titleOption\" onClick={this.onClose.bind(this)}>\r\n                  <SVG src={cancel}/>\r\n              </span>\r\n            </div>\r\n            <span draggable=\"true\" className=\"Box__title\" onDragStart={this.onDragStart.bind(this)} onDragEnd={this.onDragEnd.bind(this)} onDrag={this.onDrag.bind(this)}>\r\n              {icon && <SVG className=\"Box__titleIcon\" src={icon} style={{fill: formatedColor, backgroundColor: formatedBackgroundColor}}/>}\r\n              <span className=\"Box__titleText\" style={{color: formatedTextColor}}>{this.constructor.className}</span>\r\n            </span>\r\n            {this.state.isInfo && <div className=\"Box__info\" style={{minHeight: this.contentRect.height ? this.contentRect.height : '', maxWidth: this.contentRect.width ? this.contentRect.width : ''}}>{infoBox}</div>}\r\n            <span ref={this.content} className=\"Box__content\" style={!this.state.isMinimized && !this.state.isInfo ? {} : {display: 'none'}}>\r\n              <ContextMenuTrigger id={\"\"}>\r\n                {box}\r\n                {transforms !== null && <div className='TransformBox'>{transforms}</div>}\r\n              </ContextMenuTrigger>\r\n              <div className='DropBox' ref={this.dropbox}>\r\n                <ContextMenuTrigger id={this.constructor.className + this.props.id} holdToDisplay={-1}>\r\n                  {this.constructor.unauthorized.indexOf(\"*\") === -1 && <div className=\"Box__container\" ref={this.container} onDrop={this.onDrop.bind(this)} onDragEnter={this.onDragEnter.bind(this)} onDragOver={this.onDragOver.bind(this)} onDragLeave={this.onDragLeave.bind(this)}>\r\n                    {children}\r\n                    {!this.hasReachedLimit() && <span className=\"Box__placeholder\">Right click to add</span>}\r\n                  </div>}\r\n                </ContextMenuTrigger>\r\n              </div>\r\n            </span>\r\n          </div>\r\n        </ContextMenuBox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nBox._id = 0; //or use shortid ?\r\n\r\nexport default Box;\r\n","import React from 'react';\r\nimport './BoxGroup.css';\r\nimport Box from '../Box/Box';\r\n\r\nconst className = \"BoxGroup\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass BoxGroup extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className = BoxGroup.className;\r\n    this.elements = [];\r\n  }\r\n\r\n  addChild(child) {\r\n\r\n    if(!child) return;\r\n    let obj = new child(); //tricky\r\n    let children = this.state.children;\r\n    if(obj instanceof Box && this.isAuthorized(child)) {\r\n      this.setChildren([...this.state.children, {type:this.beforeAddChild(child), id:Box.id}]);\r\n    }\r\n  }\r\n\r\n  getBoxPlaceHolder() {\r\n    return <div className=\"PlaceHolder\" key='ph20'><p>The Box will appear here</p></div>;\r\n  }\r\n\r\n  pushChild(child) {\r\n    if(!child || !(\"type\" in child) || !(\"id\" in child)) return;\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      const children = this.state.children;\r\n      this.setChildren([...children, child]);\r\n    }\r\n  }\r\n\r\n  setChildren(children) {\r\n    this.elements = [];\r\n    super.setChildren(children);\r\n  }\r\n\r\n  draw(sk) {\r\n    let el = this.elements;\r\n    for(let i = 0; i < el.length; ++i) {\r\n       let element = el[i];\r\n       sk.push();\r\n         this.drawBeforeChild(sk, element);\r\n         if(element) element.draw(sk);\r\n       sk.pop();\r\n    }\r\n  }\r\n\r\n  getChildren() {\r\n    this.elements = [];\r\n    let children = this.state.children.map((child, index) =>\r\n      <child.type key={child.id} id={child.id} parentsList={this.parentsList} parent={this} ref={el => {if(el) this.elements[index] = el.ref;}} saveState={(state) => {child.state = state}} state={child.state}/>\r\n    );\r\n\r\n    if(this.state.dragEnter >= 0) {\r\n      children.splice(this.state.dragEnter, 0, this.getBoxPlaceHolder());\r\n    }\r\n\r\n    return children;\r\n  }\r\n\r\n  insertChild(child, index = 0) {\r\n    if(!child || !(\"type\" in child) || !(\"id\" in child) || index > this.state.children.length) return;\r\n    if(index === this.state.children.length) {\r\n      this.pushChild(child);\r\n      return;\r\n    }\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      let children = this.state.children;\r\n      children.splice(index, 0, child);\r\n      this.setChildren(children);\r\n    }\r\n  }\r\n\r\n  hasReachedLimit() {\r\n    return false;\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  renderBox() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default BoxGroup;\r\n","import Color from './Color';\r\n\r\nclass Black extends Color {\r\n\r\n  constructor() {\r\n    super(0, 0, 0, 255);\r\n  }\r\n\r\n}\r\n\r\nBlack.className = \"Black\";\r\n\r\nexport default Black;\r\n","import React from 'react';\r\nimport './Workspace.css';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport Black from '../Colors/Black';\r\n\r\nconst menuColor = [\r\n  {\r\n    type: 'Background Color',\r\n    elements: [\r\n      {type: 'Black'},\r\n      {type: 'White'},\r\n      {type: 'Red'},\r\n      {type: 'Orange'},\r\n      {type: 'Yellow'},\r\n      {type: 'Green'},\r\n      {type: 'LightBlue',\r\n      name: 'Light Blue'},\r\n      {type: 'Blue'}\r\n    ]\r\n  }\r\n];\r\n\r\nconst menuReset = [\r\n  {\r\n    type: 'Reset'\r\n  }\r\n];\r\n\r\nconst className = \"Workspace\";\r\nconst unauthorized = [\"Markov\", \"Series\"];\r\n\r\nclass Workspace extends BoxGroup {\r\n\r\n  static _instance;\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return unauthorized;\r\n  }\r\n\r\n  static addChild(box) {\r\n    if(Workspace._instance !== undefined) {\r\n      Workspace._instance.addChild(box);\r\n    }\r\n  }\r\n\r\n  static forceUpdate() {\r\n    if(Workspace._instance !== undefined) {\r\n      Workspace._instance.forceUpdate();\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    if(Workspace._instance !== undefined) {\r\n      return Workspace._instance;\r\n    }\r\n    super(props);\r\n    this.className = this.constructor.className;\r\n    this.elements = []; //no this.state.elements\r\n    this.isFlexVertical = false;\r\n    this.startDrag = {x: 0, y: 0};\r\n    this.addDrawBeforeType(\"Figure\", function(sk) {\r\n      sk.scale(sk.width, sk.height);\r\n      sk.translate(sk.width / 2, sk.height / 2);\r\n      //sk.strokeWeight(1 / sk.width);\r\n    });\r\n    this.addDrawBeforeType(\"Recursion\", function(sk) {\r\n      sk.scale(sk.width, sk.height);\r\n      sk.translate(sk.width / 2, sk.height / 2)\r\n      //sk.strokeWeight(1 / sk.width);\r\n    });\r\n    Workspace._instance = this;\r\n    // Redefinition of Menu Colors\r\n    this.suppMenu = [\r\n      {\r\n        menu: menuColor,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            let color = window.getClassFromName(data.type);\r\n            if(color) this.setState({color: new color()});\r\n          }\r\n        }\r\n      },\r\n      {\r\n        menu: menuReset,\r\n        handleClick: (event, data) => {\r\n          this.setState({children: [], color: new Black()});\r\n          this.elements = [];\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.children = [];\r\n    this.state.color = new Black();\r\n  }\r\n\r\n  draw(sk) {\r\n    sk.fill(this.state.color.getColor(sk));\r\n    sk.rect(0, 0, sk.width, sk.height);\r\n    //background.sendToBack();\r\n    super.draw(sk);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    let canvas = new Canvas();\r\n    canvas.sendDraw(this.draw.bind(this));\r\n  }\r\n\r\n  onDragStart(e) {\r\n    this.startDrag.x = e.screenX;\r\n    this.startDrag.y = e.screenY;\r\n    let img = document.createElement('img');\r\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n    e.dataTransfer.setDragImage(img, 0, 0);\r\n    e.dataTransfer.effectAllowed = \"all\";\r\n    e.stopPropagation();\r\n  }\r\n\r\n  onDrag(e) {\r\n    if(this.state.children.length === 0) return;\r\n    e.preventDefault();\r\n    if(e.screenX || e.screenY) {\r\n      let target = e.target;\r\n      let movX = e.screenX - this.startDrag.x;\r\n      let movY = e.screenY - this.startDrag.y;\r\n      this.startDrag.x = e.screenX;\r\n      this.startDrag.y = e.screenY;\r\n      target.scrollLeft -= movX;\r\n      target.scrollTop -= movY;\r\n      //target.style.left = target.offsetLeft + movX + \"px\";\r\n      //target.style.top = target.offsetTop + movY + \"px\";\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  getInstructions() {\r\n    return (\r\n      <div className=\"Workspace__placeholder\">\r\n        <p className=\"Workspace__Rightclick\">Right click here</p>\r\n        <div className=\"Workspace__Instructions\">\r\n          <p>To begin with...</p>\r\n          <ol>\r\n            <li>Choose <em>Placement > Grid</em></li>\r\n            <li>Add in it a Markov</li>\r\n            <li>Add in Markov some <em>Elements</em></li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div draggable={this.state.children.length > 0} className={this.className} onDragStart={this.onDragStart.bind(this)} onDrag={this.onDrag.bind(this)}>\r\n        <ContextMenuBox id={this.constructor.className} menu={[...this.menu, ...this.suppMenu]}>\r\n          {this.state.children.length === 0 && this.getInstructions()}\r\n          {this.state.children.length > 0 && <div className=\"Workspace__viewBox\">\r\n            <div className='DropBox' ref={this.container} onDrop={this.onDrop.bind(this)} onDragEnter={this.onDragEnter.bind(this)} onDragOver={this.onDragOver.bind(this)} onDragLeave={this.onDragLeave.bind(this)}>\r\n              {this.getChildren()}\r\n            </div>\r\n          </div>}\r\n        </ContextMenuBox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Workspace;\r\n","import React, {Component} from 'react';\r\nimport exactMath from 'exact-math';\r\n\r\n\r\nclass BoxInputNumber extends Component {\r\n\r\n    onWheel(e) {\r\n        const step = this.props.step ? this.props.step : 1;\r\n        const value = parseFloat(e.target.value ? e.target.value : 0) + exactMath.mul(e.deltaY, step);\r\n        if(e.target.min > value || e.target.max < value) return;\r\n        if(this.props.onChange) {\r\n            this.props.onChange(value);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <input\r\n                {...this.props}\r\n                type='number'\r\n                onChange={(e) => {\r\n                    const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                    if(e.target.min > value || e.target.max < value) return;\r\n                    if(this.props.onChange) {\r\n                        this.props.onChange(value);\r\n                    }\r\n                }}\r\n                onMouseUp={(e) => {\r\n                    const target = e.target;\r\n                    target.select();\r\n                    if(this.props.onMouseUp) {\r\n                        this.props.onMouseUp(e);\r\n                    }\r\n                }}\r\n                onFocus={(e) => {\r\n                    e.target.addEventListener('wheel', this.onWheel.bind(this), false);\r\n                    if(this.props.onFocus) {\r\n                        this.props.onFocus(e);\r\n                    }\r\n                }}\r\n                onBlur={(e) => {\r\n                    e.target.removeEventListener('wheel', this.onWheel.bind(this), false);\r\n                    if (window.getSelection) {\r\n                        if (window.getSelection().empty) {  // Chrome\r\n                            window.getSelection().empty();\r\n                        } else if (window.getSelection().removeAllRanges) {  // Firefox\r\n                            window.getSelection().removeAllRanges();\r\n                        }\r\n                        } else if (document.selection) {  // IE?\r\n                        document.selection.empty();\r\n                    }\r\n\r\n                    if(this.props.onBlur) {\r\n                        this.props.onBlur(e)\r\n                    }\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default BoxInputNumber;","import React, { Component } from 'react';\r\nimport './Save.css';\r\nimport JSZip from 'jszip';\r\nimport {saveAs} from 'file-saver';\r\n\r\n// import Components\r\nimport Canvas from '../../Components/Canvas/Canvas';\r\nimport BoxInputNumber from '../BoxInputNumber/BoxInputNumber';\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport icon_save_alt from '../../Icons/save_alt.svg';\r\nimport burst_mode from '../../Icons/burst_mode.svg';\r\nimport arrow_up from '../../Icons/arrow_upUI.svg';\r\nimport arrow_down from '../../Icons/arrow_downUI.svg';\r\n\r\n\r\nclass Save extends Component {\r\n  state = {\r\n    DownloadName: \"Untitled\",\r\n    DownloadNameSaved: \"Untitled\",\r\n    DownloadSuffixNumber: {\r\n      svg: 0,\r\n      jpg: 0\r\n    },\r\n    DownloadSuffix: \"\",\r\n    DownloadFormat: \"jpg\",\r\n    zipNumber: 10\r\n  }\r\n  downloadImage = function(el) {\r\n\r\n    let nb = this.state.DownloadSuffixNumber;\r\n    let dname = this.state.DownloadName;\r\n    nb[this.state.DownloadFormat] = nb[this.state.DownloadFormat]+1;\r\n    this.setState({DownloadSuffixNumber: nb});\r\n    this.setState({DownloadSuffix: \"-\" + (nb[this.state.DownloadFormat]+1)});\r\n\r\n    if (this.state.DownloadName === this.state.DownloadNameSaved) {\r\n      dname = (nb[this.state.DownloadFormat] === 1) ? this.state.DownloadName : this.state.DownloadName + \"-\" + nb[this.state.DownloadFormat];\r\n    } else {\r\n      this.setState({DownloadNameSaved: this.state.DownloadName});\r\n    }\r\n\r\n    if(this.state.DownloadFormat === 'svg') {\r\n      const blob = new Blob([Canvas.getImageData(true)], {type : 'image/svg+xml'});\r\n      saveAs(blob, dname + '.svg');\r\n    } else {\r\n      Canvas.toBlob((blob) => saveAs(blob, dname + '.jpg'), 'image/jpeg');\r\n    }\r\n    console.log(\"SUFFIX\", nb[this.state.DownloadFormat], \"NAME + FORMAT\", dname + \".\" + this.state.DownloadFormat);\r\n  }\r\n\r\n  downloadZip = function() {\r\n    let zip = new JSZip();\r\n    zip.file(this.state.DownloadName + \".txt\", \"By Paperwork\\n\");\r\n    let img = zip.folder(this.state.DownloadName);\r\n    const isSVG = this.state.DownloadFormat === 'svg';\r\n    for(let i = 0; i < this.state.zipNumber; ++i) {\r\n      const imageData = isSVG ? btoa(Canvas.getImageData(true)) : Canvas.getImageData(false);\r\n      img.file(`${this.state.DownloadName}-${i}.${this.state.DownloadFormat}`, imageData, {base64: true});\r\n      Canvas.draw();\r\n    }\r\n    const self = this;\r\n    zip.generateAsync({type:\"blob\"})\r\n    .then(function(content) {\r\n        saveAs(content, self.state.DownloadName+\".zip\");\r\n    });\r\n  }\r\n\r\n  incrementZipNumber = function() {\r\n    this.setState({zipNumber: (this.state.zipNumber === 1000) ? this.state.zipNumber : parseInt(this.state.zipNumber)+1})\r\n  }\r\n\r\n  decrementZipNumber = function() {\r\n    this.setState({zipNumber: (this.state.zipNumber === 1) ? this.state.zipNumber : parseInt(this.state.zipNumber)-1})\r\n  }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"save\">\r\n              <div className=\"button burstMode border-right\" onClick={this.downloadZip.bind(this)}>\r\n                <SVG src={burst_mode}/>\r\n              </div>\r\n              <div className=\"save__zipNumber border-right\">\r\n                <BoxInputNumber\r\n                className=\"save__zipNumberInput\"\r\n                type=\"number\"\r\n                min={1}\r\n                max={100}\r\n                value={this.state.zipNumber}\r\n                onChange={(value) => {\r\n                  this.setState({zipNumber: value});\r\n                }}\r\n                onBlur={(event) => {\r\n                  this.setState({zipNumber: event.target.value})\r\n                }}\r\n                />\r\n                <div className=\"save__zipNumberArrows border-left\">\r\n                  <div className=\"button border-bottom\" onClick={(event) => this.incrementZipNumber()}><SVG src={arrow_up}/></div>\r\n                  <div className=\"button\" onClick={(event) => this.decrementZipNumber()}><SVG src={arrow_down}/></div>\r\n                </div>\r\n              </div>\r\n              <input\r\n              className=\"save__name\"\r\n              type=\"text\"\r\n              value={this.state.DownloadName}\r\n              onChange={(event) => {\r\n                this.setState({DownloadSuffixNumber: {svg: 0, jpg: 0}, DownloadSuffix: \"\", DownloadName: event.target.value})\r\n              }}\r\n              onBlur={(event) => {\r\n                const dname = (event.target.value === \"\") ? \"Untitled\" : event.target.value;\r\n                this.setState({DownloadName: dname});\r\n              }}\r\n              />\r\n              <span className=\"save__nameSuffixe\">{this.state.DownloadSuffix}</span>\r\n              <div className=\"save__format\">\r\n                <input id=\"save__jpg\" type=\"radio\" value=\"jpg\" name=\"saveFormat\" defaultChecked onChange={(event) => {if(event.target.checked) {this.setState({DownloadFormat: event.target.value})}}}/>\r\n                <label htmlFor=\"save__jpg\" className=\"save__formatItem button border-left\">.jpg</label>\r\n                <input id=\"save__svg\" type=\"radio\" value=\"svg\" name=\"saveFormat\" onChange={(event) => {if(event.target.checked) {this.setState({DownloadFormat: event.target.value})}}}/>\r\n                <label htmlFor=\"save__svg\" className=\"save__formatItem button border-left\">.svg</label>\r\n              </div>\r\n              <a className=\"button save__button border-left\" onClick={(event) => this.downloadImage(event.target)}>\r\n                <SVG src={icon_save_alt}/>\r\n              </a>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Save;\r\n","import { Component } from 'react';\r\nimport './Input.css';\r\n\r\nconst className = \"Input\";\r\n\r\nclass Input extends Component {\r\n\r\n    state = {};\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        if(this.props.input && this.constructor.className === this.props.input.className) {\r\n            this.initFromSavedState(this.props.input.state)\r\n        } else {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n    }\r\n\r\n    getValue() {\r\n        return 0;\r\n    }\r\n\r\n    toJSON() {\r\n        return {};\r\n    }\r\n\r\n    update(state) {\r\n        this.setState(state, () => {\r\n            if(this.props.onChange) {\r\n                this.props.onChange();\r\n            }\r\n            window.updateWorkspace();\r\n        });\r\n    }\r\n}\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport Workspace from '../../Workspace/Workspace';\r\nimport Input from '../Input';\r\nimport Slider from 'rc-slider';\r\n\r\nimport 'rc-slider/assets/index.css';\r\nimport './SliderBox.css';\r\n\r\nconst className = \"SliderBox\";\r\n\r\nconst SliderTooltip = Slider.createSliderWithTooltip(Slider);\r\n\r\nclass SliderBox extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.value = state.value;\r\n    }\r\n\r\n    init() {\r\n        this.value = this.props.defaultValue;\r\n    }\r\n\r\n    getValue() {\r\n        return this.value;\r\n    }\r\n\r\n    toJSON() {\r\n        return {value: this.value};\r\n    }\r\n\r\n    render() {\r\n        return(\r\n        <SliderTooltip\r\n            min={this.props.min}\r\n            max={this.props.max}\r\n            defaultValue={this.value}\r\n            marks={this.props.marks}\r\n            step={this.props.step}\r\n            className=\"Box__slider\"\r\n            style={{padding: '3px 0'}}\r\n            trackStyle={{height: '8px', backgroundColor: 'black', borderRadius: 'unset' }}\r\n            railStyle={{height: '8px', backgroundColor: 'black', borderRadius: 'unset' }}\r\n            handleStyle={{marginTop: '-3px', borderColor: 'black' }}\r\n            dotStyle={{bottom: '-4px', borderColor: 'black' }}\r\n            onChange={(value) => {\r\n                this.value = value;\r\n                if(this.props.onChange) {\r\n                    this.props.onChange(value);\r\n                }\r\n            }}\r\n            onAfterChange={() => Workspace.forceUpdate()}\r\n            tipProps={{placement: this.props.placementTip ? this.props.placementTip : 'bottom'}}\r\n            tipFormatter={this.props.tipFormatter ? this.props.tipFormatter : (value) => value}\r\n        />\r\n        );\r\n    }\r\n}\r\n\r\nexport default SliderBox;\r\n","import React, { Component } from 'react';\r\nimport './Transform.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport SliderBox from '../Input/SliderBox/SliderBox';\r\nimport shortid from 'shortid';\r\nimport SVG from 'react-svg';\r\n\r\nconst inputMenu = [\r\n  {\r\n    type: 'Random'\r\n  },\r\n  {\r\n    type: 'Increment'\r\n  },\r\n  {\r\n    type: 'SliderBox',\r\n    name: 'Value'\r\n  }\r\n];\r\n\r\n/*Attribute*/\r\nclass Transform extends Component {\r\n\r\n  state = {};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if(this.props.state) {\r\n      this.initFromSavedState(this.props.state);\r\n    } else {\r\n      this.init();\r\n    }\r\n\r\n    this.id = shortid.generate();\r\n    this.className = Transform.className;\r\n    this.inputElement = React.createRef();\r\n    this.returns = this.props.returns || ((value) => value);\r\n    this.menu = [\r\n      {\r\n        menu: inputMenu,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            this.setState({input: window.getClassFromName(data.type)}, () => {\r\n              window.updateWorkspace();\r\n            });\r\n          }\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // is late\r\n    const {saveTransform} = this.props;\r\n    if(saveTransform) {\r\n        saveTransform(this.toJSON());\r\n    }\r\n  }\r\n\r\n  initFromSavedState(state) {\r\n    this.state.input = window.getClassFromName(state.input.className);\r\n  }\r\n\r\n  init() {\r\n    this.state.input = SliderBox;\r\n  }\r\n\r\n  getInputValue() {\r\n    return this.returns(this.inputElement.current.getValue());\r\n  }\r\n\r\n  toJSON() {\r\n    return {input: {className: this.state.input.className, state: this.inputElement.current.toJSON()}};\r\n  }\r\n\r\n  render() {\r\n    const {input} = this.props.state ? this.props.state : {};\r\n    return (\r\n      <ContextMenuBox id={this.constructor.className + this.id} menu={this.menu}>\r\n        <div className=\"Transform\">\r\n          {this.props.icon && <SVG className='TransformBox__icon' src={this.props.icon}/>}\r\n          <div className='TransformBox__input'>\r\n            <this.state.input {...this.props} ref={this.inputElement} onChange={this.componentDidUpdate.bind(this)} input={input}/>\r\n          </div>\r\n        </div>\r\n      </ContextMenuBox>\r\n    );\r\n  }\r\n}\r\n\r\nTransform.className = \"Transform\";\r\nTransform.icon = undefined;\r\n\r\nexport default Transform;\r\n","import React, { Component } from 'react';\r\nimport './Transform.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport SliderBox from '../Input/SliderBox/SliderBox';\r\nimport Transform from './Transform';\r\nimport shortid from 'shortid';\r\nimport SVG from 'react-svg';\r\n\r\nconst linkMenuTypes = [\r\n  {\r\n    type: 'Link XY Axis'\r\n  }\r\n];\r\n\r\nconst unlinkMenuTypes = [\r\n    {\r\n        type: 'Unlink XY Axis'\r\n    }\r\n];\r\n\r\n/*Attribute*/\r\n//need to be refactored\r\nclass Transform2D extends Transform {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.id = shortid.generate();\r\n    this.className = Transform2D.className;\r\n    this.inputElementY = React.createRef();\r\n\r\n    const linkMenu = {\r\n        menu: linkMenuTypes,\r\n        handleClick: (event, data) => {\r\n            this.setState({solo: true}, () => {\r\n            window.updateWorkspace();\r\n            });\r\n          }\r\n    };\r\n    \r\n    this.menuX = [{...this.menu[0]}, linkMenu];\r\n    this.menuX[0].handleClick = (event, data) => {\r\n        if(data.type) {\r\n            this.setState({input: window.getClassFromName(data.type)}, () => {\r\n                window.updateWorkspace();\r\n            });\r\n        }\r\n    };\r\n\r\n    this.menuY = [{...this.menu[0]}, linkMenu];\r\n    this.menuY[0].handleClick = (event, data) => {\r\n        if(data.type) {\r\n            this.setState({inputY: window.getClassFromName(data.type)}, () => {\r\n                window.updateWorkspace();\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    const unlinkMenu = {\r\n        menu: unlinkMenuTypes,\r\n        handleClick: (event, data) => {\r\n              this.setState({solo: false, inputY: this.state.input}, () => {\r\n                window.updateWorkspace();\r\n              });\r\n          }\r\n    };\r\n    this.menu.push(unlinkMenu);\r\n  }\r\n\r\n  initFromSavedState(state) {\r\n    super.initFromSavedState(state);\r\n    if(!state.solo) {\r\n        this.state.inputY = window.getClassFromName(state.inputY.className);\r\n    } else {\r\n        this.state.inputY = this.state.input;\r\n    }\r\n    this.state.solo = state.solo;\r\n  }\r\n\r\n  init() {\r\n      super.init();\r\n      this.state.inputY = SliderBox;\r\n      this.state.solo = false;\r\n  }\r\n\r\n  getInputValue() {\r\n      if(this.state.solo) {\r\n          const value = super.getInputValue();\r\n          return {x: value, y: value};\r\n      } else {\r\n          return this.returns({x: this.inputElement.current.getValue(), y: this.inputElementY.current.getValue()});\r\n      }\r\n  }\r\n\r\n  toJSON() {\r\n    let json = {...super.toJSON(), solo: this.state.solo};\r\n\r\n    if(!this.state.solo) {\r\n        json.inputY = {className: this.state.inputY.className, state: this.inputElementY.current.toJSON()};\r\n    } else {\r\n        json.inputY = json.input;\r\n    }\r\n\r\n    return json;\r\n  }\r\n\r\n  render() {\r\n\r\n    if(!this.state.solo) {\r\n        const {input, inputY} = this.props.state ? this.props.state : {};\r\n\r\n        return (\r\n            <div className=\"Transform\">\r\n              {this.props.icon && <SVG className='TransformBox__icon' src={this.props.icon}/>}\r\n              <div className=\"Transform2D__inputs\">\r\n                <ContextMenuBox id={this.constructor.className + this.id} menu={this.menuX}>\r\n                    <div className='TransformBox__input'>\r\n                        <this.state.input {...this.props} ref={this.inputElement} placementTip='top' onChange={this.componentDidUpdate.bind(this)} input={input}/>\r\n                    </div>\r\n                </ContextMenuBox>\r\n                <ContextMenuBox id={this.constructor.className + this.id + '1'} menu={this.menuY}>\r\n                    <div className='TransformBox__input'>\r\n                    <this.state.inputY {...this.props} ref={this.inputElementY} onChange={this.componentDidUpdate.bind(this)} input={inputY}/>\r\n                    </div>\r\n                </ContextMenuBox>\r\n              </div>\r\n            </div>\r\n        );\r\n    } else {\r\n        return super.render();\r\n    }\r\n    \r\n  }\r\n}\r\n\r\nTransform2D.className = \"Transform2D\";\r\nTransform2D.icon = undefined;\r\n\r\nexport default Transform2D;\r\n","import React from 'react';\r\nimport Box from '../Box/Box';\r\nimport Transform from '../Transforms/Transform';\r\nimport Transform2D from '../Transforms/Transform2D';\r\nimport scaleIcon from '../../Icons/scale.svg';\r\nimport rotateIcon from '../../Icons/rotate_left.svg';\r\nimport moveIcon from '../../Icons/move.svg';\r\nimport './Figure.css';\r\n\r\nconst className = \"Figure\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Figure extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  get scale() {\r\n    if(this.transforms['scale']) {\r\n      return this.transforms['scale'].getInputValue();\r\n    } else {\r\n      return {x: this._scale, y: this._scale};\r\n    }\r\n  }\r\n\r\n  get rotation() {\r\n    if(this.transforms['rotation']) {\r\n      return this.transforms['rotation'].getInputValue();\r\n    } else {\r\n      return this._rotation;\r\n    }\r\n  }\r\n\r\n  get width() {\r\n    return this._width;\r\n  }\r\n\r\n  get height() {\r\n    return this._height;\r\n  }\r\n\r\n  get position() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue();\r\n    } else {\r\n      return {x: this._x, y: this._y};\r\n    }\r\n  }\r\n\r\n  get x() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue().x;\r\n    } else {\r\n      return this._x;\r\n    }\r\n  }\r\n\r\n  get y() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue().y;\r\n    } else {\r\n      return this._y;\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Figure.className;\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._rotation = 0;\r\n    this._height = 1;\r\n    this._width = 1;\r\n    this._scale = 1;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n\r\n  }\r\n  \r\n  getTransforms() {\r\n    const {translate, scale, rotation} = this.state.transforms;\r\n\r\n    const Transforms = [\r\n      // Translation\r\n      <Transform2D \r\n        min={-1}\r\n        max={1}\r\n        defaultValue={this._x}\r\n        marks={{'-1':-1, 0:0, 1:1}}\r\n        step={0.05}\r\n        key={0}\r\n        ref={(el) => {this.transforms['translate'] = el}}\r\n        icon={moveIcon}\r\n        saveTransform={(state) => this.state.transforms['translate'] = state}\r\n        state={translate}\r\n      />,\r\n      // Scale\r\n      <Transform2D \r\n        min={0.1}\r\n        max={1.5}\r\n        defaultValue={this._scale}\r\n        marks={{0.1:0.1, 1:1, 1.5:1.5}}\r\n        step={0.1}\r\n        key={1}\r\n        ref={(el) => {this.transforms['scale'] = el}}\r\n        icon={scaleIcon}\r\n        saveTransform={(state) => this.state.transforms['scale'] = state}\r\n        state={scale}\r\n      />,\r\n      // Rotation\r\n      <Transform \r\n        min={0}\r\n        max={360}\r\n        defaultValue={this._rotation}\r\n        marks={{0:0, 90:90, 180:180, 270:270, 360:360}}\r\n        step={1}\r\n        key={2}\r\n        ref={(el) => {this.transforms['rotation'] = el}}\r\n        icon={rotateIcon}\r\n        saveTransform={(state) => this.state.transforms['rotation'] = state}\r\n        state={rotation}\r\n      />\r\n    ];\r\n    return Transforms;\r\n  }\r\n\r\n  draw(sk) {\r\n    const scale = this.scale;\r\n    const {x, y} = this.position;\r\n    sk.push();\r\n      sk.fill(this.state.color.getColor(sk));\r\n      //console.log(-sk.scaleValue.x / 2 + this.x * sk.scaleValue.x, -sk.scaleValue.y / 2 + this.y * sk.scaleValue.y);\r\n      sk.scale(scale.x, scale.y, 0.5, 0.5);\r\n      sk.rotate(this.rotation, 0.5, 0.5);\r\n      sk.translate(-0.5 + x, -0.5 + y);\r\n      this.drawFigure(sk);\r\n    sk.pop();\r\n  }\r\n}\r\n\r\nexport default Figure;\r\n","import './Rectangle.css';\r\nimport Figure from '../Figure';\r\nimport square from '../../../Icons/full_square.svg';\r\n\r\nconst className = \"Rectangle\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Rectangle extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return square;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Rectangle.className;\r\n    this._scale = 0.9;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let rect = sk.rect(0, 0, this.width, this.height);\r\n    sk.setPathTransform(rect);\r\n  }\r\n\r\n}\r\n\r\nexport default Rectangle;\r\n","import './Triangle.css';\r\nimport Figure from '../Figure';\r\nimport triangle from '../../../Icons/full_triangle.svg';\r\n\r\nconst className = \"Triangle\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Triangle extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return triangle;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Triangle.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let triangle = sk.triangle(0, 0, this.width);\r\n    sk.setPathTransform(triangle);\r\n  }\r\n}\r\n\r\n\r\nexport default Triangle;\r\n","import './Ellipse.css';\r\nimport Figure from '../Figure';\r\nimport ellipse from '../../../Icons/full_ellipse.svg';\r\n\r\nconst className = \"Ellipse\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Ellipse extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return ellipse;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Ellipse.className;\r\n  }\r\n\r\n  getTransforms() {\r\n    return super.getTransforms().slice(0, 2); // Excludes rotation\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let ellipse = sk.ellipse(0, 0, this.width, this.height);\r\n    sk.setPathTransform(ellipse);\r\n  }\r\n\r\n}\r\n\r\nexport default Ellipse;\r\n","import React from 'react';\r\nimport Figure from '../Figure';\r\nimport Transform from '../../Transforms/Transform'\r\nimport './Hatching.css';\r\n\r\nconst className = \"Hatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Hatching extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  get density() {\r\n    if(this.transforms['density']) {\r\n      return this.transforms['density'].getInputValue();\r\n    } else {\r\n      return this._density;\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Hatching.className;\r\n    this._density = 11;\r\n  }\r\n\r\n  getTransforms() {\r\n    const Transforms = [\r\n      // Density\r\n      <Transform\r\n        min={2}\r\n        max={21}\r\n        defaultValue={this._density}\r\n        marks={{2:1, 11:10, 21:20}}\r\n        step={1}\r\n        key={0}\r\n        ref={(el) => {this.transforms['density'] = el}}\r\n        tipFormatter={(value) => value - 1}\r\n      />\r\n    ];\r\n    return Transforms;\r\n  }\r\n\r\n  draw(sk) {\r\n    sk.stroke(this.state.color.getColor(sk));\r\n    super.draw(sk);\r\n    sk.noStroke();\r\n  }\r\n\r\n}\r\n\r\nexport default Hatching;\r\n","import './HHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport HHatchingIcon from '../../../../Icons/HHatching.svg';\r\n\r\nconst className = \"HHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass HHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return HHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + HHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    const density = this.density;\r\n    let gapY = this.height / density;\r\n    let parent = sk.group();\r\n    for(var j = 0; j <= density ; j++) {\r\n      let line = sk.line(this.x, this.y + j * gapY, this.x + this.width, this.y + j * gapY);\r\n      parent.addChild(line);\r\n    }\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default HHatching;\r\n","import './VHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport VHatchingIcon from '../../../../Icons/VHatching.svg';\r\n\r\nconst className = \"VHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass VHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return VHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + VHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    const density = this.density;\r\n    let gapX = this.width / density;\r\n\r\n    let parent = sk.group();\r\n\r\n    for(var i = 0; i <= density ; i++){\r\n      let line = sk.line(this.x + i * gapX, this.y, this.x + i * gapX, this.y + this.height);\r\n      parent.addChild(line);\r\n    }\r\n\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default VHatching;\r\n","import './LOHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport LOHatchingIcon from '../../../../Icons/LOHatching.svg';\r\n\r\nconst className = \"LOHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass LOHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return LOHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LOHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let i = this.x;\r\n    let j = this.y + this.height;\r\n    const density = this.density;\r\n    let gapX = (this.width / density);\r\n    let gapY = (this.height / density);\r\n\r\n    let parent = sk.group();\r\n\r\n    while(i < this.x + this.width){\r\n      let line = sk.line(i, this.y, this.x+this.width, j);\r\n      parent.addChild(line);\r\n      i += gapX;\r\n      j -= gapY;\r\n    }\r\n\r\n    i = this.x + this.width;\r\n    j = this.y;\r\n    while(j < this.y + this.height){\r\n      let line = sk.line(this.x, j, i, this.y+this.height);\r\n      parent.addChild(line);\r\n      i -= gapX;\r\n      j += gapY;\r\n    }\r\n\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default LOHatching;\r\n","import './ROHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport ROHatchingIcon from '../../../../Icons/ROHatching.svg';\r\n\r\nconst className = \"ROHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass ROHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return ROHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + ROHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let i = this.x + this.width;\r\n    let j = this.y + this.height;\r\n    const density = this.density;\r\n    let gapX = (this.width / density);\r\n    let gapY = (this.height / density);\r\n\r\n    let parent = sk.group();\r\n\r\n    while(j > this.y){\r\n      let line = sk.line(this.x, j, i, this.y);\r\n      parent.addChild(line);\r\n      i -= gapX;\r\n      j -= gapY;\r\n    }\r\n\r\n    i = this.x;\r\n    j = this.y;\r\n    while(j < this.y + this.height){\r\n      let line = sk.line(i, this.y + this.height, this.x + this.width, j);\r\n      parent.addChild(line);\r\n      i += gapX;\r\n      j += gapY;\r\n    }\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default ROHatching;\r\n","import Color from './Color';\r\n\r\nclass White extends Color {\r\n\r\n  constructor() {\r\n    super(255, 255, 255, 255);\r\n  }\r\n\r\n}\r\n\r\nWhite.className = \"White\";\r\n\r\nexport default White;\r\n","import React from 'react';\r\nimport Box from '../Box/Box';\r\nimport './Placement.css';\r\nimport Workspace from '../Workspace/Workspace';\r\nimport White from '../Colors/White';\r\n\r\nconst className = \"Placement\";\r\nconst unauthorized = [\"Placement\"];\r\n\r\n/*Pencil*/\r\nclass Placement extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Placement.className;\r\n  }\r\n\r\n  handleClick(event, data) {\r\n    if(data.type) {\r\n      this.setState({mode: window.getClassFromName(data.type), color: new White()})\r\n      Workspace.forceUpdate();\r\n    }\r\n  }\r\n\r\n  doBeforeSetChildren(children) {\r\n    this.state.color = new White(); // reload the state anyway\r\n    return super.doBeforeSetChildren(children);\r\n  }\r\n\r\n  initStateFromSavedState() {\r\n    super.initStateFromSavedState();\r\n    if(typeof this.state.mode === 'string') {\r\n      this.state.mode = window.getClassFromName(this.state.mode);\r\n    }\r\n  }\r\n\r\n  static boxToJSON(constructor, state) {\r\n    const superJSON = super.boxToJSON(constructor, state);\r\n    return {...superJSON, state: {...superJSON.state, currentMode: undefined, mode: state.mode.className}};\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.currentMode = undefined;\r\n    this.state.mode = null;\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  renderMode() {\r\n    if(!this.state.mode) return null;\r\n    return (<this.state.mode key={this.constructor.className + this.state.mode.className} handleClick={this.handleClick.bind(this)} ref={el => {this.state.currentMode = el}} />);\r\n  }\r\n\r\n  draw(sk) {\r\n\r\n  }\r\n}\r\n\r\nexport default Placement;\r\n","import React, { Component } from 'react';\r\nimport Box from \"../Box/Box\";\r\n\r\nexport default function InBox(Wrapper, ...Children) {\r\n\r\n\r\n  const authorizedChildren = Children.filter(\r\n    (Child) => window.isAuthorized(Child, Wrapper.unauthorized)\r\n  );\r\n\r\n  const cl = class extends Component {\r\n\r\n    static wrapper = Wrapper;\r\n    static children = authorizedChildren;\r\n\r\n    render() {\r\n\r\n      const boxChildren = authorizedChildren.map(\r\n        (Child) => {return {type: Child, id: Box.id};}\r\n      );\r\n\r\n      return(\r\n        <Wrapper {...this.props} ref={(el) => {\r\n          if(!el) return;\r\n          this.ref = el;\r\n          el.state.children = boxChildren;\r\n          this.props.saveState(el.state);\r\n          const child = this.props.parent.state.children.find(\r\n            (child) => child.id === this.props.id\r\n          );\r\n          child.type = Wrapper;\r\n          this.props.parent.forceUpdate();\r\n          window.updateWorkspace();\r\n          }}>\r\n        </Wrapper>\r\n      );\r\n    }\r\n  };\r\n\r\n  return cl;\r\n};\r\n","import BoxGroup from '../BoxGroup/BoxGroup';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport './Series.css';\r\n\r\nconst className = \"Series\";\r\nconst unauthorized = [\"Placement\", \"Series\", \"Markov\"];\r\n\r\n/*Pencil*/\r\nclass Series extends BoxGroup {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Series.className;\r\n    this.suppMenu = [];\r\n    this.currentState = 0;\r\n    Canvas.attach(this);\r\n  }\r\n\r\n  receiveNotification() {\r\n    this.currentState = 0;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Canvas.detach(this);\r\n  }\r\n\r\n  setChildren(children) {\r\n    super.setChildren(children);\r\n    this.currentState = 0;\r\n  }\r\n\r\n  draw(sk) {\r\n    if(this.elements.length === 0) return;\r\n\r\n    if(this.elements[this.currentState]) this.elements[this.currentState].draw(sk);\r\n    this.currentState = (this.currentState + 1) % this.elements.length;\r\n  }\r\n\r\n}\r\n\r\nexport default Series;\r\n","import React, { Component } from 'react';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport shortid from 'shortid';\r\nimport './Mode.css';\r\n\r\n/*Pencil*/\r\nclass Mode extends Component {\r\n\r\n  state = {\r\n  };\r\n\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className = Mode.className;\r\n    this.id = shortid.generate();\r\n    this.modes = [];\r\n    this.handleClick = this.props.handleClick || ((event, data) => {});\r\n  }\r\n\r\n  mode(sk, data) {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"gridMode\">\r\n        <ContextMenuBox id={this.constructor.className + this.id} menu={[{menu: this.modes, handleClick: this.props.handleClick}]}>\r\n          <span className=\"gridMode__label\"> Grid Distribution </span>\r\n          <span className=\"gridMode__text\"> {this.constructor.className} </span>\r\n        </ContextMenuBox>\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nMode.className = \"Mode\";\r\n\r\nexport default Mode;\r\n","import './GridMode.css';\r\nimport Mode from \"../Mode\";\r\n\r\nconst modes = [\r\n  {\r\n    type: 'DiagonalLeft',\r\n    name: 'Diagonal Left'\r\n  },\r\n  {\r\n    type: 'DiagonalRight',\r\n    name: 'Diagonal Right'\r\n  },\r\n  {\r\n    type: 'LinearX',\r\n    name: 'Linear X'\r\n  },\r\n  {\r\n    type: 'LinearY',\r\n    name: 'Linear Y'\r\n  },\r\n  {\r\n    type: 'Orthogonal'\r\n  },\r\n  {\r\n    type: 'SnailRight',\r\n    name: 'Snail Right'\r\n  }\r\n];\r\n\r\n\r\n/*Pencil*/\r\nclass GridMode extends Mode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + GridMode.className;\r\n    this.modes = modes;\r\n  }\r\n\r\n  mode(sk, data) {\r\n\r\n  }\r\n\r\n}\r\n\r\nGridMode.className = \"GridMode\";\r\n\r\nexport default GridMode;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass LinearX extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LinearX.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback, lines} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    if(lines) {\r\n      for(var i = 0; i < rows; i++) {\r\n        sk.push();\r\n          sk.translate(0, row * i);\r\n          if(i > 0) {\r\n            let line = sk.line(0, 0, sk.width, 0);\r\n            sk.setPathTransform(line);\r\n          }\r\n        sk.pop();\r\n    \t}\r\n\r\n      for(var j = 0; j < columns; j++) {\r\n        sk.push();\r\n          sk.translate(j * column, 0);\r\n          if(j > 0) {\r\n            let line = sk.line(0, 0, 0, sk.height);\r\n            sk.setPathTransform(line);\r\n          }\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n    if(callback) {\r\n      for(var i = 0; i < rows; i++) {\r\n        sk.push();\r\n          sk.translate(0, row * i);\r\n          for(var j = 0; j < columns; j++) {\r\n            sk.push();\r\n              sk.translate(j * column, 0);\r\n              callback();\r\n            sk.pop();\r\n          }\r\n        sk.pop();\r\n    \t}\r\n    }\r\n  }\r\n}\r\n\r\nLinearX.className = \"LinearX\";\r\n\r\nexport default LinearX;\r\n","import React from 'react';\r\nimport Placement from '../Placement';\r\nimport './Grid.css';\r\nimport SliderBox from '../../Input/SliderBox/SliderBox';\r\nimport grid_on from '../../../Icons/grid_on.svg';\r\nimport InBox from '../../InBox/InBox';\r\nimport Series from '../../Series/Series';\r\n\r\nimport LinearX from '../../Modes/GridMode/LinearX/LinearX';\r\n\r\nconst className = \"Grid\";\r\nconst unauthorized = [];\r\nconst doBeforeAddChild = {\r\n  Figure: (child) => {\r\n    return InBox(Series, child);\r\n  },\r\n  Recursion: (child) => {\r\n    return InBox(Series, child);\r\n  }\r\n}\r\n\r\n/*Pencil*/\r\nclass Grid extends Placement {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return grid_on;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Grid.className;\r\n    this.doBeforeAddChild = doBeforeAddChild;\r\n    //const {columns, rows} = this.props;\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.columns = 8;\r\n    this.state.rows = 8;\r\n    this.state.mode = LinearX;\r\n  }\r\n\r\n  draw(sk) {\r\n\r\n    var column = sk.width/this.state.columns;\r\n  \tvar row = sk.height/this.state.rows;\r\n    var elem = this.next;\r\n    var currentMode = this.state.currentMode;\r\n\r\n  \tif(!elem) sk.stroke(this.state.color.getColor(sk));\r\n\r\n    if(currentMode) {\r\n      currentMode.mode(sk, {\r\n        columns: this.state.columns,\r\n        rows: this.state.rows,\r\n        lines: elem ? false : true,\r\n        callback: function() {\r\n          if(elem) {\r\n            sk.noStroke();\r\n            sk.push();\r\n              sk.scale(column, row);\r\n              sk.translate(column / 2, row / 2);\r\n              elem.draw(sk);\r\n            sk.pop();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  getColorMenu() {\r\n    if(this.state.mode === LinearX && this.state.children.length === 0) {\r\n      return super.getColorMenu();\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  getTransforms() {\r\n    return(\r\n      <div className=\"TransformBox2\">\r\n        <SliderBox\r\n        min={1}\r\n        max={30}\r\n        defaultValue={this.state.columns}\r\n        marks={{1: 1, 30: 30}}\r\n        step={1}\r\n        onChange={(value) => {this.setState({columns: value, rows: value});}}\r\n        />\r\n        {this.renderMode()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Grid;\r\n","import React, { Component } from 'react';\r\nimport shortid from 'shortid';\r\n\r\nconst CLASSNAME = 'Radar__Draggable'\r\nconst DRAGGINGCLASS = 'isDragging';\r\n\r\nclass DraggableCursor extends Component {\r\n\r\n  state = {isDragging: false};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.ratio = 1;\r\n    this.onMouseMoveHandler = this.onMouseMove.bind(this);\r\n    this.onMouseUpHandler = this.onMouseUp.bind(this);\r\n    this.movement = 0;\r\n  }\r\n\r\n  onMouseDown(e) {\r\n    if(e.button !== 0) return;\r\n    window.addEventListener('mousemove', this.onMouseMoveHandler);\r\n    window.addEventListener('mouseup', this.onMouseUpHandler);\r\n    this.ratio = e.target.getBoundingClientRect().width / (this.props.r * 2);\r\n    this.onDragStart(e);\r\n  }\r\n\r\n  onMouseUp(e) {\r\n    if(e.button !== 0) return;\r\n    window.removeEventListener('mousemove', this.onMouseMoveHandler);\r\n    window.removeEventListener('mouseup', this.onMouseUpHandler);\r\n    this.onDragEnd(e);\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    if(!this.state.isDragging) return;\r\n    this.onDrag(e);\r\n  }\r\n\r\n  onDragStart(e) {\r\n    this.setState({isDragging: true});\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onDragEnd(e) {\r\n    this.setState({isDragging: false});\r\n    this.movement = 0;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if(this.props.onAfterChange) {\r\n      this.props.onAfterChange();\r\n    }\r\n  }\r\n\r\n  onDrag(e) {\r\n    const {vector, step, radius, minRadius, maxRadius, onChange} = this.props;\r\n\r\n    const scalar = e.movementX * vector.x  + e.movementY * vector.y;\r\n    this.movement -= scalar;\r\n    if(Math.abs(this.movement) >= step * this.ratio) {\r\n      const movement = Math.sign(this.movement) * Math.floor(Math.abs(this.movement) / (step * this.ratio));\r\n      const newRadius = radius + movement;\r\n      this.movement -= movement * step * this.ratio;\r\n      if(minRadius <= newRadius && newRadius <= maxRadius && onChange) {\r\n        onChange(newRadius);\r\n      }\r\n    }\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  render() {\r\n\r\n    const {cx, cy, r} = this.props;\r\n    const className = CLASSNAME + (this.state.isDragging ? ' ' + DRAGGINGCLASS : '');\r\n\r\n    return <circle\r\n      cx={cx}\r\n      cy={cy}\r\n      r={r}\r\n      className={className}\r\n      onMouseDown={this.onMouseDown.bind(this)}\r\n    />;\r\n  }\r\n\r\n}\r\n\r\nexport default DraggableCursor;\r\n","import React, { Component } from 'react';\r\nimport shortid from 'shortid';\r\nimport DraggableCursor from './DraggableCursor';\r\nimport Paper from 'paper';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport next from '../../Icons/next.svg';\r\nimport unknown from '../../Icons/unknown.svg';\r\n\r\nconst WIDTH = 220;\r\nconst HEIGHT = 220;\r\nconst RADIUS = 100;\r\n\r\nconst getCirclePoint = (center = new Paper.Point(0, 0), r = 1, elNumber = 3, index = 0) => {\r\n  return new Paper.Point(center.x + r * Math.cos(index * 2 * Math.PI / elNumber - Math.PI / 2), center.y + r * Math.sin(index * 2 * Math.PI / elNumber - Math.PI / 2));\r\n}\r\n\r\nconst getCirclePoints = (center = new Paper.Point(0, 0), r = new Array(elNumber).fill(1), elNumber = 3) => {\r\n  let points = [];\r\n  for(let i = 0; i < elNumber; ++i) {\r\n    points.push( getCirclePoint(center, r[i], elNumber, i) );\r\n  }\r\n\r\n  return [...points];\r\n}\r\n\r\n\r\nclass Radar extends Component {\r\n\r\n  render() {\r\n\r\n    const probas = this.props.points.map((point) => (100 - point));\r\n    const callback = this.props.callback;\r\n\r\n\r\n    const elNumber = this.props.points.length;\r\n    const maxRadius = RADIUS;\r\n    const center = new Paper.Point(WIDTH / 2, HEIGHT / 2);\r\n    const points = getCirclePoints(center, probas, elNumber);\r\n    const pins = getCirclePoints(center, new Array(elNumber).fill(maxRadius), elNumber);\r\n    const outerPoints = getCirclePoints(center, new Array(elNumber).fill(maxRadius + 1), elNumber);\r\n    const d = points.reduce((acc, point, index) => `${acc} ${index > 0 ? 'L ' : ''}${point.x} ${point.y}`, 'M') + 'Z';\r\n    const outerD = outerPoints.reduce((acc, point, index) => `${acc} ${index > 0 ? 'L ' : ''}${point.x} ${point.y}`, 'M') + 'Z';\r\n    const lines = points.map((point, index) => (<line key={index} x1={center.x} y1={center.y} x2={point.x} y2={point.y} className='Radar__Line'/>));\r\n\r\n    const cursor = points.map((point, index) => {\r\n      const angle = index * 2 * Math.PI / elNumber - Math.PI / 2;\r\n      const radius = probas[index];\r\n      const x = center.x + radius * Math.cos(angle);\r\n      const y = center.y + radius * Math.sin(angle);\r\n      const vertex = new Paper.Point(center.x + maxRadius * Math.cos(angle), center.y + maxRadius * Math.sin(angle));\r\n      const vector = new Paper.Point(center.x - vertex.x, center.y - vertex.y).normalize();\r\n\r\n      return (\r\n        <DraggableCursor\r\n          cx={x}\r\n          cy={y}\r\n          r={6}\r\n          step={1}\r\n          vector={vector}\r\n          minRadius={0}\r\n          maxRadius={maxRadius}\r\n          radius={radius}\r\n          onChange={(newRadius) => {\r\n            if(this.props.onChange) {\r\n              const newProba = (maxRadius - newRadius);\r\n              this.props.onChange(newProba, index);\r\n            }\r\n          }}\r\n          onAfterChange={() => {\r\n            if(this.props.onAfterChange) {\r\n              this.props.onAfterChange();\r\n            }\r\n          }}\r\n          key={index}\r\n        />\r\n      )\r\n    });\r\n\r\n    const landmarks = pins.map((point, index) => (\r\n      <circle key={index} cx={point.x} cy={point.y} r={2} className='Radar__Point' onClick={() => {\r\n        callback(0, index);\r\n      }}>\r\n        <title>0</title>\r\n      </circle>\r\n      /*<text x={point.x} y={point.y + 12} className='Radar__Text'>0</text>*/\r\n    ));\r\n\r\n    return (\r\n      <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox={`0 0 ${WIDTH} ${HEIGHT}`} className='Markov__Radar'>\r\n        <path d={outerD} className='Radar__Outline'/>\r\n        <path d={d} className='Radar__Shape'/>\r\n        {lines}\r\n        <circle cx={center.x} cy={center.y} r={2} className='Radar__Point Radar__Center'>\r\n          <title>100</title>\r\n        </circle>\r\n        <text x={center.x} y={center.y + 12} className='Radar__Text'>100</text>\r\n        {landmarks}\r\n        {cursor}\r\n      </svg>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Radar;\r\n","import exactMath from 'exact-math';\r\n\r\nexport function fix(value, step) {\r\n    const netValue = exactMath.mul(exactMath.round(exactMath.div(parseFloat(value), step)), step);\r\n    return netValue;\r\n}\r\n\r\nexport function clamp_left(a, b) {\r\n    return a < b ? b : a;\r\n}\r\n \r\nexport function clamp_right(a, b) {\r\n    return a > b ? b : a;\r\n}\r\n \r\nexport function clamp(a, b, c) {\r\n   return clamp_left(clamp_right(a, c), b);\r\n}","import React from 'react';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport BoxInputNumber from '../BoxInputNumber/BoxInputNumber';\r\nimport './Markov.css';\r\nimport markovIcon from '../../Icons/markov.svg';\r\nimport Radar from './Radar';\r\nimport * as Utils from '../../Utils';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport next from '../../Icons/next.svg';\r\nimport unknown from '../../Icons/unknown.svg';\r\n\r\nconst CENT = 100;\r\nconst ROUND = 10;\r\n\r\nconst className = \"Markov\";\r\nconst unauthorized = [\"Placement\"];\r\n\r\n/*Pencil*/\r\nclass Markov extends BoxGroup {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return markovIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Markov.className;\r\n    this.suppMenu = [];\r\n    this.currentState = parseInt(Math.random() * (this.state.children.length));\r\n    this.idElement = [];\r\n    this.hasInfo = true;\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.proba = this.initProba();\r\n    this.state.index = 0;\r\n  }\r\n\r\n  initProba(length = this.state.children.length) {\r\n    if(length <= 1) return [[CENT]];\r\n    const defaultValue = Math.floor(CENT / ROUND / length) * ROUND;\r\n    let proba = new Array(length).fill(new Array(length).fill(defaultValue));\r\n    proba.forEach((_, index) => {\r\n      proba[index][length - 1] = 100 - defaultValue * (length - 1);\r\n    });\r\n    return proba;\r\n  }\r\n\r\n  doBeforeSetChildren(children) {\r\n    const result = super.doBeforeSetChildren(children);\r\n\r\n    this.currentState = parseInt(Math.random() * (children.length));\r\n    const newProba = this.initProba(children.length);\r\n    this.setState({proba: newProba});\r\n    return {...result, proba: newProba, index: 0};\r\n  }\r\n\r\n  getColorMenu() {\r\n    return [];\r\n  }\r\n\r\n  draw(sk) {\r\n    let length = this.state.children.length;\r\n    if(length === 0) return;\r\n    let element = this.elements[this.currentState];\r\n    if(length === 1) {\r\n      if(element) element.draw(sk);\r\n      return;\r\n    }\r\n    let proba = 0;\r\n    let rand = parseInt(Math.random() * (CENT));\r\n    let i;\r\n\r\n    for(i = 0; i < length && rand >= proba; ++i) {\r\n      proba += this.state.proba[this.currentState][i];\r\n    }\r\n\r\n    if(this.elements[i - 1]) this.elements[i - 1].draw(sk);\r\n    this.currentState = i - 1;\r\n  }\r\n\r\n  getProbas(index) {\r\n    if(index < 0 || index >= this.state.children.length) {\r\n      return [];\r\n    }\r\n\r\n    return [...this.state.proba[index]];\r\n  }\r\n\r\n  checkProba(proba, probaIndex) {\r\n    const length = this.state.children.length;\r\n    const index = this.state.index;\r\n    let newProba = [...this.state.proba];\r\n    newProba[index] = Array.from(this.state.proba[index]);\r\n    newProba[index][probaIndex] = proba;\r\n    const sum = newProba[index].reduce((acc, p) => acc + p, 0);\r\n    let remaining = sum - 100;\r\n    let i = (probaIndex + 1) % length;\r\n    while(i !== probaIndex && Math.abs(remaining) > 0) {\r\n      const p = newProba[index][i];\r\n      let r = Utils.clamp(p - remaining, 0, 100);\r\n      newProba[index][i] = r;\r\n      remaining -= p - r;\r\n      i = (i + 1) % length;\r\n    }\r\n    this.setState({proba: newProba});\r\n  }\r\n\r\n  getInfo() {\r\n    return(\r\n      <>\r\n        <p>A Markov chain is a stochastic model describing a sequence of possible events in which the probability of each event depends only on the state attained in the previous event.</p>\r\n        <p>For instance, a state <strong>A</strong> can have a probability <em>p</em> to reach a state <strong>B</strong> and a probability <em>(1 - p)</em> to reach itself</p>\r\n      </>\r\n    );\r\n  }\r\n\r\n  renderBox() {\r\n    let radar = null;\r\n    const index = this.state.index;\r\n    const length = this.state.children.length;\r\n    let header = null;\r\n    let info = null;\r\n    let inputs = [];\r\n\r\n    if(length > 1 && this.state.proba.length > 1) {\r\n\r\n        for(let i = 0; i < length; ++i) {\r\n          const angle = i * 2 * Math.PI / length - Math.PI / 2;\r\n          const x = 50 + 40 * Math.cos(angle);\r\n          const y = 50 + 40 * Math.sin(angle);\r\n          const iconSelected = (i === index) ? ' selected' : '';\r\n          inputs.push(<div className=\"Markov__InputContainer\" key={i} style={{left: x + '%', top: y + '%'}}>\r\n            <span className={\"Markov__InputIcon\" + iconSelected}>\r\n              {iconSelected && <SVG src={next} className=\"exponent\" />}\r\n              <SVG src={this.state.children[i].type.icon} onClick={() => {this.setState({index: i})}}/>\r\n            </span>\r\n            <BoxInputNumber className=\"Markov__Input\"\r\n              min={0}\r\n              max={100}\r\n              value={this.state.proba[index][i]}\r\n              onChange={(value) => {\r\n                const intValue = parseInt(value, 10);\r\n                this.checkProba(intValue, i);\r\n                window.updateWorkspace();\r\n              }}\r\n            />\r\n          </div>);\r\n        }\r\n\r\n        radar = <Radar points={this.getProbas(index)} onChange={this.checkProba.bind(this)} onAfterChange={() => window.updateWorkspace()} />;\r\n\r\n\r\n        header = <span className=\"Markov__RangeIcon\">\r\n          <SVG src={this.state.children[index].type.icon}/>\r\n          <SVG src={next}/>\r\n          <SVG src={unknown}/>\r\n        </span>;\r\n\r\n        info = <span className=\"Markov__Info\">sum = 100%</span>;\r\n      } else {\r\n        info = <span>Not enough elements</span>;\r\n      }\r\n\r\n    return <div className=\"Markov__Parameters\">\r\n      {header}\r\n      {radar}\r\n      {inputs}\r\n      {info}\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default Markov;\r\n","import Box from '../Box/Box';\r\nimport './Void.css';\r\nimport voidIcon from '../../Icons/void.svg';\r\n\r\nconst className = \"Void\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Void extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return voidIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Void.className;\r\n    this.suppMenu = [];\r\n    this.canMinimize = false;\r\n  }\r\n\r\n  getColorMenu() {\r\n    return [];\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default Void;\r\n","import Color from './Color';\r\n\r\nclass Red extends Color {\r\n\r\n  constructor() {\r\n    super(229, 38, 30, 255);\r\n  }\r\n\r\n}\r\n\r\nRed.className = \"Red\";\r\n\r\nexport default Red;\r\n","import Color from './Color';\r\n\r\nclass Orange extends Color {\r\n\r\n  constructor() {\r\n    super(235, 117, 50, 255);\r\n  }\r\n\r\n}\r\n\r\nOrange.className = \"Orange\";\r\n\r\nexport default Orange;\r\n","import Color from './Color';\r\n\r\nclass Yellow extends Color {\r\n\r\n  constructor() {\r\n    super(247, 208, 56, 255);\r\n  }\r\n\r\n}\r\n\r\nYellow.className = \"Yellow\";\r\n\r\nexport default Yellow;\r\n","import Color from './Color';\r\n\r\nclass Green extends Color {\r\n\r\n  constructor() {\r\n    super(163, 224, 71, 255);\r\n  }\r\n\r\n}\r\n\r\nGreen.className = \"Green\";\r\n\r\nexport default Green;\r\n","import Color from './Color';\r\n\r\nclass LightBlue extends Color {\r\n\r\n  constructor() {\r\n    super(52, 185, 230, 255);\r\n  }\r\n\r\n}\r\n\r\nLightBlue.className = \"LightBlue\";\r\n\r\nexport default LightBlue;\r\n","import Color from './Color';\r\n\r\nclass Blue extends Color {\r\n\r\n  constructor() {\r\n    super(67, 85, 219, 255);\r\n  }\r\n\r\n}\r\n\r\nBlue.className = \"Blue\";\r\n\r\nexport default Blue;\r\n","import React, { Component } from 'react';\r\nimport './Symbol.css';\r\nimport Figure from '../Figure';\r\n\r\nconst className = \"Symbol\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Symbol extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Symbol.className;\r\n  }\r\n}\r\n\r\n\r\nexport default Symbol;\r\n","import React, { Component } from 'react';\r\nimport './Arrow.css';\r\nimport Symbol from '../Symbol';\r\nimport arrow_right from '../../../../Icons/arrow_right.svg';\r\nimport Paper from 'paper';\r\n\r\nconst className = \"Arrow\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Arrow extends Symbol {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return arrow_right;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Arrow.className;\r\n    this.headLength = 0.20;\r\n    this.tailLength = 0.09;\r\n    this.headAngle = 35;\r\n    this.tailAngle = 110;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n\r\n    const end = new Paper.Point(this.width, this.height / 2);\r\n    const start = new Paper.Point(0, this.height / 2);\r\n    const arrowVec = start.subtract(end);\r\n\r\n    // parameterize {headLength: 20, tailLength: 6, headAngle: 35, tailAngle: 110}\r\n    // construct the arrow\r\n    const arrowHead = arrowVec.normalize(this.headLength);\r\n    const arrowTail = arrowHead.normalize(this.tailLength);\r\n\r\n    const p3 = end;                  // arrow point\r\n\r\n    const p2 = end.add(arrowHead.rotate(-this.headAngle));   // leading arrow edge angle\r\n    const p4 = end.add(arrowHead.rotate(this.headAngle));    // ditto, other side\r\n\r\n    const p1 = p2.add(arrowTail.rotate(this.tailAngle));     // trailing arrow edge angle\r\n    const p5 = p4.add(arrowTail.rotate(-this.tailAngle));    // ditto\r\n\r\n    // specify all but the last segment, closed does that\r\n    let path = sk.path([start, p1, p2, p3, p4, p5]);\r\n    path.closed = true;\r\n    sk.setPathTransform(path);\r\n  }\r\n}\r\n\r\n\r\nexport default Arrow;\r\n","import Figure from '../Figure';\r\nimport './Character.css';\r\n\r\nconst className = \"Character\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Character extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Character.className;\r\n    this.text = 'noText';\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let text = sk.text(this.text, 0.5, 0.85);\r\n    text.fontSize = this.height;\r\n    sk.setPathTransform(text);\r\n  }\r\n}\r\n\r\nexport default Character;\r\n","import Character from './Character';\r\nimport zero from '../../../Icons/zero.svg';\r\n\r\nconst className = \"Zero\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Number0 extends Character {\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return zero;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Number0.className;\r\n    this.text = '0'\r\n  }\r\n}\r\n\r\nexport default Number0;\r\n","import Character from './Character';\r\nimport one from '../../../Icons/one.svg';\r\n\r\nconst className = \"One\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Number1 extends Character {\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return one;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Number1.className;\r\n    this.text = '1'\r\n  }\r\n}\r\n\r\nexport default Number1;\r\n","import React, {Component} from 'react';\r\nimport './Log.css';\r\n\r\nclass Log extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onClose = (this.props.onClose instanceof Function) ? this.props.onClose : (e) => {};\r\n        this.text = new String(this.props.children);\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className='Log' onClick={this.onClose}>\r\n                <span>{this.text.toString()}</span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Log;","import React from 'react';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport './Recursion.css';\r\nimport SVG from 'react-svg';\r\nimport recursion from '../../Icons/filter.svg';\r\nimport recursionOption from '../../Icons/filter_none.svg';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport Log from '../Log/Log';\r\nimport * as Utils from '../../Utils';\r\n\r\nconst className = \"Recursion\";\r\nconst unauthorized = [\"Placement\", \"Recursion\", \"Markov\", \"Void\"];\r\n\r\nconst maxRecursionWhenDuplicate = 2;\r\nconst maxRecursion = 5;\r\nconst maxThisBox = 4;\r\nconst maxThisBoxWhenDuplicate = 3;\r\n\r\n/*Pencil*/\r\nclass Recursion extends BoxGroup {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    static get icon() {\r\n        return recursion;\r\n    }\r\n\r\n    static get unauthorized() {\r\n        return [...super.unauthorized, ...unauthorized];\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.className += \" \" + Recursion.className;\r\n        this.suppMenu = [];\r\n        this.hasInfo = true;\r\n        this.globalRecursion = 0;\r\n        Canvas.attach(this);\r\n    }\r\n\r\n    receiveNotification() {\r\n        this.globalRecursion = 0;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Canvas.detach(this);\r\n    }\r\n\r\n    filterUnauthorized(menu) {\r\n        if(this.constructor.unauthorized.indexOf('*') !== -1) {\r\n            return [];\r\n        }\r\n        const filteredMenu = menu.filter((item) => this.constructor.unauthorized.indexOf(item.type) === -1);\r\n        if(this.hasParent('Recursion') && (this.state.nbThisBox < maxThisBox && this.state.ignoreThisBox || this.state.nbThisBox < maxThisBoxWhenDuplicate)) {\r\n            return [...filteredMenu, {type: 'ThisBox'}];\r\n        }\r\n        return filteredMenu;\r\n    }\r\n\r\n    getColorMenu() {\r\n        return [];\r\n    }\r\n\r\n    initState() {\r\n        super.initState();\r\n        this.state.recursionMax = 2;\r\n        this.state.ignoreThisBox = true;\r\n        this.state.nbThisBox = 0;\r\n        this.state.log = false;\r\n    }\r\n\r\n    draw(sk) {\r\n        let el = this.elements;\r\n        for(let i = 0; i < el.length; ++i) {\r\n            let element = el[i];\r\n            if(this.state.ignoreThisBox && this.globalRecursion > this.state.recursionMax) {\r\n                continue;\r\n            }\r\n            sk.push();\r\n                this.drawBeforeChild(sk, element);\r\n                if(element) element.draw(sk);\r\n            sk.pop();\r\n        }\r\n    }\r\n\r\n    getInfo() {\r\n        return (\r\n            <>\r\n                <p>Recursion occurs when a thing is defined in terms of itself or of its type.</p>\r\n                <p>In other words, it's an object or a process that <strong>refers to itself</strong>.</p>\r\n                <p>It's a infinite loop and a limit condition is necessary.</p>\r\n            </>\r\n        );\r\n    }\r\n\r\n    doBeforeRender() {\r\n        this.reloadMenu(); //Force reload menu\r\n    }\r\n\r\n    getTransforms() {\r\n        return (\r\n            <>\r\n                <div className='Transform'>\r\n                    <SVG src={recursionOption} className='TransformBox__icon'/>\r\n                    <div className='Recursion__options'>\r\n                        <input type='number' min={1} max={this.state.ignoreThisBox ? maxRecursion : maxRecursionWhenDuplicate} value={this.state.recursionMax} onChange={(e) => {\r\n                            const value = parseInt(e.target.value, 10) || 0;\r\n                            if(e.target.min > value || e.target.max < value) return;\r\n                            this.setState({recursionMax: value});\r\n                            window.updateWorkspace();\r\n                        }}\r\n                        onMouseUp={(e) => {\r\n                            const target = e.target;\r\n                            target.select();\r\n                          }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='Transform'>\r\n                    <div className='Recursion__options'>\r\n                        <label className='Recursion__duplicate'>\r\n                            <input type='checkbox' checked={this.state.ignoreThisBox} onChange={(e) => {\r\n                                if(this.state.nbThisBox <= maxThisBoxWhenDuplicate) {\r\n                                    this.setState({ignoreThisBox: !this.state.ignoreThisBox, recursionMax: !this.state.ignoreThisBox ? this.state.recursionMax : Utils.clamp(this.state.recursionMax, 1, maxRecursionWhenDuplicate)});\r\n                                } else {\r\n                                    this.setState({log: true});\r\n                                }\r\n                                window.updateWorkspace();\r\n                            }}/>\r\n                            <span className='checkmark'></span>\r\n                            <span>No Global Duplication</span>\r\n                        </label>\r\n                        {this.state.log && <Log onClose={(e) => this.setState({log: false})}>Please, remove some ThisBox</Log>}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Recursion;\r\n","import Figure from '../Figure';\r\nimport Canvas from '../../Canvas/Canvas';\r\nimport './ThisBox.css';\r\nimport thisIcon from '../../../Icons/my_location.svg';\r\n\r\nconst className = \"ThisBox\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass ThisBox extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return thisIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + ThisBox.className;\r\n    this.suppMenu = [];\r\n    this.recursionParent = null;\r\n    this.recursion = 0;\r\n    Canvas.attach(this);\r\n  }\r\n\r\n  receiveNotification() {\r\n    this.recursion = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getRecursionDraw();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Canvas.detach(this);\r\n    this.recursionParent.setState({nbThisBox: this.recursionParent.state.nbThisBox - 1});\r\n  }\r\n\r\n\r\n  getColorMenu() {\r\n    return [];\r\n  }\r\n\r\n  getRecursionDraw() {\r\n    let parent = this.props.parent;\r\n    while(parent && parent.constructor.className !== 'Recursion') {\r\n        parent = parent.props.parent;    \r\n    }\r\n    if(!parent) {\r\n        this.onClose();\r\n    } else {\r\n        this.recursionParent = parent;\r\n        this.recursionParent.setState({nbThisBox: this.recursionParent.state.nbThisBox + 1});\r\n    }\r\n  }\r\n\r\n  onDragStart(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    window.isInThisBoxCall = true;\r\n    if(this.recursionParent && (this.recursion <= this.recursionParent.state.recursionMax && !this.recursionParent.state.ignoreThisBox || this.recursionParent.globalRecursion <= this.recursionParent.state.recursionMax && this.recursionParent.state.ignoreThisBox)) {\r\n      ++this.recursionParent.globalRecursion;\r\n      ++this.recursion;\r\n      this.recursionParent.draw(sk);\r\n      --this.recursion;\r\n      --this.recursionParent.globalRecursion;\r\n    }\r\n    window.isInThisBoxCall = false;\r\n  }\r\n\r\n  draw(sk) {\r\n    // Prevents randomize and increment inputs\r\n    const scale = this.scale;\r\n    const {x, y} = this.position;\r\n    sk.push();\r\n      sk.scale(scale.x, scale.y);\t\r\n      sk.rotate(this.rotation);\r\n      sk.translate(x, y);\r\n      this.drawFigure(sk);\r\n    sk.pop();\r\n  }\r\n\r\n}\r\n\r\nexport default ThisBox;","import React from 'react';\r\nimport Input from '../Input';\r\nimport BoxInputNumber from '../../BoxInputNumber/BoxInputNumber';\r\nimport exactMath from 'exact-math';\r\nimport * as Utils from '../../../Utils';\r\nimport SVG from 'react-svg';\r\nimport random from '../../../Icons/dice.svg';\r\nimport arrowLeft from '../../../Icons/arrow_leftUI.svg';\r\nimport arrowRight from '../../../Icons/arrow_rightUI.svg';\r\nimport './Random.css';\r\n\r\nconst className = \"Random\";\r\n\r\nclass Random extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.step = (this.props.step || 1);\r\n        this.value = this.rand();\r\n    }\r\n\r\n    getValue() {\r\n        if(!window.isInThisBoxCall) {\r\n            this.value = this.rand();\r\n        }\r\n        return this.value;\r\n    }\r\n\r\n    rand() {\r\n        const rand = Math.random() * (this.state.to - this.state.from + this.step) + this.state.from;\r\n        return this.fix(rand);\r\n    }\r\n\r\n    init() {\r\n        this.state.from = this.props.min;\r\n        this.state.to = this.props.max;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.state = state;\r\n    }\r\n\r\n    fix(value) {\r\n        return Utils.fix(value, this.step);\r\n    }\r\n\r\n    toJSON() {\r\n        return {...this.state};\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className='Input Random'>\r\n                <BoxInputNumber min={this.props.min} max={exactMath.sub(this.state.to, this.step)} step={this.step} value={this.state.from} onChange={(value) => {\r\n                        this.update({from: this.fix(value)});\r\n                    }}\r\n                />\r\n                <SVG className='Random__arrow' src={arrowLeft}/>\r\n                <SVG className='Random__icon' src={random} />\r\n                <SVG className='Random__arrow' src={arrowRight}/>\r\n                <BoxInputNumber min={exactMath.add(this.state.from, this.step)} max={this.props.max} step={this.step} value={this.state.to} onChange={(value) => {\r\n                        this.update({to: this.fix(value)});\r\n                    }}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Random;\r\n","import React from 'react';\r\nimport Input from '../Input';\r\nimport Canvas from '../../Canvas/Canvas';\r\nimport BoxInputNumber from '../../BoxInputNumber/BoxInputNumber';\r\nimport exactMath from 'exact-math';\r\nimport * as Utils from '../../../Utils';\r\nimport SVG from 'react-svg';\r\nimport increment from '../../../Icons/increment.svg';\r\nimport decrement from '../../../Icons/decrement.svg';\r\nimport arrowLeft from '../../../Icons/arrow_leftUI.svg';\r\nimport arrowRight from '../../../Icons/arrow_rightUI.svg';\r\nimport looped from '../../../Icons/repeat.svg';\r\nimport loopedInverse from '../../../Icons/sync_alt.svg';\r\nimport limited from '../../../Icons/trending_flat.svg';\r\nimport './Increment.css';\r\n\r\nconst inputOptionsIcons = [\r\n    {\r\n        icon: limited,\r\n        id: 'limited',\r\n        title: 'Limited'\r\n    },\r\n    {\r\n        icon: looped,\r\n        id: 'looped',\r\n        title: 'Looped'\r\n    },\r\n    {\r\n        icon: loopedInverse,\r\n        id: 'loopedInverse',\r\n        title: 'Looped Inverse'\r\n    }\r\n];\r\n\r\nconst className = \"Increment\";\r\n\r\nclass Increment extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.increment = this.state.increment;\r\n        this.step = props.step || 1;\r\n        this.value = exactMath.add(this.state.from, exactMath.mul(-this.state.increment, this.state.step));\r\n        this.target = null;\r\n        Canvas.attach(this);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Canvas.detach(this);\r\n    }\r\n\r\n    init() {\r\n        this.state.from = this.props.min;\r\n        this.state.to = this.props.max;\r\n        this.state.condition = 0;\r\n        this.state.increment = 1;\r\n        this.state.step = this.props.step || 1;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.state = state;   \r\n    }\r\n\r\n    receiveNotification() {\r\n        if(this.state.increment === -1) {\r\n            this.value = exactMath.add(this.state.to, exactMath.mul(-this.state.increment, this.state.step));\r\n        } else {\r\n            this.value = exactMath.add(this.state.from, exactMath.mul(-this.state.increment, this.state.step));\r\n        }\r\n\r\n        this.increment = this.state.increment;\r\n    }\r\n\r\n    getValue() {\r\n        if(!window.isInThisBoxCall) {\r\n            const value = exactMath.add(this.value, exactMath.mul(this.increment, this.state.step));\r\n            this.value = this.condition(value);\r\n        }\r\n        return this.value;\r\n    }\r\n\r\n    condition(value) {\r\n        switch(this.state.condition) {\r\n            case(1):\r\n                return this.looped(value);\r\n            case(2):\r\n                return this.loopedInverse(value);\r\n            default:\r\n                return this.limited(value);\r\n        }\r\n    }\r\n\r\n    fix(value) {\r\n        return Utils.fix(value, this.step);\r\n    }\r\n\r\n    limited(value) {\r\n        if(this.state.increment === 1) {\r\n            return (value >= this.state.to) ? this.state.to : value;\r\n        } else {\r\n            return (value <= this.state.from) ? this.state.from : value;\r\n        }\r\n    }\r\n\r\n    looped(value) {\r\n        if(this.state.increment === 1) {\r\n            return (value > this.state.to) ? exactMath.sub(value, this.state.to) : value;\r\n        } else {\r\n            return (value < this.state.from) ? exactMath.add(value, this.state.to) : value;\r\n        }\r\n    }\r\n\r\n    loopedInverse(value) {\r\n        if(value > this.state.to || value < this.state.from) {\r\n            this.increment = -this.increment;\r\n            if(value > this.state.to) {\r\n                return exactMath.add(this.state.to, exactMath.mul(this.increment, this.state.step));\r\n            } else {\r\n                return exactMath.add(this.state.from, exactMath.mul(this.increment, this.state.step));\r\n            }\r\n            \r\n        }\r\n        return value;\r\n    }\r\n\r\n    onChangeOption(e) {\r\n        this.update({condition: parseInt(e.target.value, 10)});\r\n    }\r\n\r\n    toJSON() {\r\n        return {...this.state};\r\n    }\r\n\r\n    render() {\r\n\r\n        const incrementIcon = (this.state.increment === 1) ? increment : decrement;\r\n        const InputOptions = inputOptionsIcons.map(({icon, id, title}, index) => {\r\n            const selected = (this.state.condition === index) ? 'selected' : ''; \r\n            return (\r\n                <label key={id} title={title} className={selected}>\r\n                    <input\r\n                        checked={this.state.condition === index}\r\n                        type='radio'\r\n                        name='condition'\r\n                        value={index}\r\n                        onChange={this.onChangeOption.bind(this)}\r\n                    />\r\n                    <SVG className={'Increment__icon'} src={icon}/>\r\n                </label>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className='Input Increment'>\r\n                <div className='Increment__limits'>\r\n                    <BoxInputNumber min={this.props.min} max={exactMath.sub(this.state.to, this.step)} step={this.step} value={this.state.from} onChange={(value) => {\r\n                            this.update({from: this.fix(value)});\r\n                        }}\r\n                    />\r\n\r\n                    <SVG className='Random__arrow' src={arrowLeft} style={(this.state.increment === 1) ? ({visibility: 'hidden'}) : {}}/>\r\n                    \r\n                    <div className='Increment__step'>\r\n                        <BoxInputNumber title='step' min={this.step} max={exactMath.sub(this.state.to, this.state.from)} step={this.step} value={this.state.step} onChange={(value) => {\r\n                                this.update({step: this.fix(value)});\r\n                            }}\r\n                        />\r\n                        <SVG className='Increment__icon' src={incrementIcon} onClick={(e) => {\r\n                            this.update({increment : -this.state.increment});\r\n                        }}/>\r\n                    </div>\r\n                    <SVG className='Random__arrow' src={arrowRight} style={(this.state.increment === -1) ? ({visibility: 'hidden'}) : {}}/>\r\n\r\n                    <BoxInputNumber min={exactMath.add(this.state.from, this.step)} max={this.props.max} step={this.step} value={this.state.to} onChange={(value) => {\r\n                            this.update({to: this.fix(value)});\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div className='Increment__options'>\r\n                    {InputOptions}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Increment;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass LinearY extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LinearY.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for(var i = 0; i < columns; i++) {\r\n      sk.push();\r\n        sk.translate(column * i, 0);\r\n    \t\tfor(var j = 0; j < rows; j++) {\r\n          sk.push();\r\n            sk.translate(0, j * row);\r\n            if(callback) callback();\r\n          sk.pop();\r\n    \t\t}\r\n      sk.pop();\r\n  \t}\r\n  }\r\n\r\n}\r\n\r\nLinearY.className = \"LinearY\";\r\n\r\nexport default LinearY;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass DiagonalLeft extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + DiagonalLeft.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for (let compteur = 0; compteur < columns; compteur++){\r\n      let i = columns - 1;\r\n      let j = compteur;\r\n      while(j >= 0){\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i-=1;\r\n        j-=1;\r\n      }\r\n    }\r\n\r\n    for (let compteur = columns-1; compteur > 0; compteur--){\r\n      let i = compteur - 1;\r\n      let j = rows - 1;\r\n      while (i >= 0) {\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i-=1;\r\n        j-=1;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nDiagonalLeft.className = \"DiagonalLeft\";\r\n\r\nexport default DiagonalLeft;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass DiagonalRight extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + DiagonalRight.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for (var compteur = 0; compteur < columns; compteur++){\r\n      for (var i = 0; i <= compteur; i++) {\r\n        sk.push();\r\n          sk.translate(column * i, (compteur-i) * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n    for (var compteur = columns - 1; compteur > 0; compteur--){\r\n      var i = columns-compteur;\r\n      var j = rows - 1;\r\n      while (i < columns) {\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i+=1;\r\n        j-=1;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nDiagonalRight.className = \"DiagonalRight\";\r\n\r\nexport default DiagonalRight;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass Orthogonal extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Orthogonal.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    // suppose that rows === columns\r\n    for (var compteur = 0; compteur < columns; compteur++) {\r\n      let i, j;\r\n      for (i = 0; i <= compteur; i++){\r\n        sk.push();\r\n          sk.translate(i * column, compteur * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n      for (j = compteur - 1; j >= 0; j--){\r\n        sk.push();\r\n          sk.translate(column * compteur, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nOrthogonal.className = \"Orthogonal\";\r\n\r\nexport default Orthogonal;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass SnailRight extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + SnailRight.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    let a = Math.round(columns / 2) - 1;\r\n    let b = Math.round(rows / 2) - 1;\r\n    let side = 1;\r\n    let move = -1;\r\n\r\n    while (side <= columns) {\r\n      move *= -1;\r\n      for (let i = 0; i<side && a >= 0 && a < columns; i++) {\r\n        sk.push();\r\n          sk.translate(a * column, b * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        a += move;\r\n      }\r\n      if(a < 0 || a >= columns) break;\r\n\r\n      for (let i = 0; i<side && b >= 0 && b < rows; i++) {\r\n        console.log(a, b);\r\n        sk.push();\r\n          sk.translate(a * column, b * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        b += move;\r\n      }\r\n      side++;\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nSnailRight.className = \"SnailRight\";\r\n\r\n\r\nexport default SnailRight;\r\n","import Figure from './Figures/Figure';\r\nimport Rectangle from './Figures/Rectangle/Rectangle';\r\nimport Triangle from './Figures/Triangle/Triangle';\r\nimport Ellipse from './Figures/Ellipse/Ellipse';\r\nimport HHatching from './Figures/Hatching/HHatching/HHatching';\r\nimport VHatching from './Figures/Hatching/VHatching/VHatching';\r\nimport LOHatching from './Figures/Hatching/LOHatching/LOHatching';\r\nimport ROHatching from './Figures/Hatching/ROHatching/ROHatching';\r\nimport Placement from './Placement/Placement';\r\nimport Grid from './Placement/Grid/Grid';\r\nimport Markov from './Markov/Markov';\r\nimport Transform from './Transforms/Transform';\r\nimport Color from './Colors/Color';\r\nimport Void from './Void/Void';\r\nimport Red from './Colors/Red';\r\nimport Orange from './Colors/Orange';\r\nimport Yellow from './Colors/Yellow';\r\nimport Green from './Colors/Green';\r\nimport LightBlue from './Colors/LightBlue';\r\nimport Blue from './Colors/Blue';\r\nimport Black from './Colors/Black';\r\nimport White from './Colors/White';\r\nimport Series from './Series/Series';\r\nimport Symbol from './Figures/Symbols/Symbol';\r\nimport Arrow from './Figures/Symbols/Arrow/Arrow';\r\nimport Character from './Figures/Characters/Character';\r\nimport Number0 from './Figures/Characters/Number0';\r\nimport Number1 from './Figures/Characters/Number1';\r\nimport Recursion from './Recursion/Recursion';\r\nimport ThisBox from './Figures/ThisBox/ThisBox';\r\nimport Random from './Input/Random/Random';\r\nimport Increment from './Input/Increment/Increment';\r\nimport SliderBox from './Input/SliderBox/SliderBox';\r\n\r\n\r\n//GridModes\r\nimport LinearY from './Modes/GridMode/LinearY/LinearY';\r\nimport LinearX from './Modes/GridMode/LinearX/LinearX';\r\nimport DiagonalLeft from './Modes/GridMode/DiagonalLeft/DiagonalLeft';\r\nimport DiagonalRight from './Modes/GridMode/DiagonalRight/DiagonalRight';\r\nimport Orthogonal from './Modes/GridMode/Orthogonal/Orthogonal';\r\nimport SnailRight from './Modes/GridMode/SnailRight/SnailRight';\r\n\r\nexport function getClassFromName(name) {\r\n  const lname = name.toLowerCase();\r\n  switch(lname) {\r\n    case('figure'):\r\n      return Figure;\r\n    case('rectangle'):\r\n      return Rectangle;\r\n    case('triangle'):\r\n      return Triangle;\r\n    case('ellipse'):\r\n      return Ellipse;\r\n    case('hhatching'):\r\n      return HHatching;\r\n    case('vhatching'):\r\n      return VHatching;\r\n    case('lohatching'):\r\n      return LOHatching;\r\n    case('rohatching'):\r\n      return ROHatching;\r\n    case('placement'):\r\n      return Placement;\r\n    case('grid'):\r\n      return Grid;\r\n    case('markov'):\r\n      return Markov;\r\n    case('transform'):\r\n      return Transform;\r\n    case('color'):\r\n      return Color;\r\n    case('red'):\r\n      return Red;\r\n    case('orange'):\r\n      return Orange;\r\n    case('yellow'):\r\n      return Yellow;\r\n    case('green'):\r\n      return Green;\r\n    case('lightblue'):\r\n      return LightBlue;\r\n    case('blue'):\r\n      return Blue;\r\n    case('black'):\r\n      return Black;\r\n    case('white'):\r\n      return White;\r\n    case('void'):\r\n      return Void;\r\n    case('linearx'):\r\n      return LinearX;\r\n    case('lineary'):\r\n      return LinearY;\r\n    case('diagonalleft'):\r\n      return DiagonalLeft;\r\n    case('diagonalright'):\r\n      return DiagonalRight;\r\n    case('orthogonal'):\r\n      return Orthogonal;\r\n    case('snailright'):\r\n      return SnailRight;\r\n    case('series'):\r\n      return Series;\r\n    case('arrow'):\r\n      return Arrow;\r\n    case('symbol'):\r\n      return Symbol;\r\n    case('character'):\r\n      return Character;\r\n    case('zero'):\r\n      return Number0;\r\n    case('one'):\r\n      return Number1\r\n    case('sliderbox'):\r\n      return SliderBox;\r\n    case('increment'):\r\n      return Increment;\r\n    case('random'):\r\n      return Random;\r\n    case('recursion'):\r\n      return Recursion;\r\n    case('thisbox'):\r\n      return ThisBox;\r\n    default:\r\n      //console.warn(lname);\r\n      return null;\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../../Assets/font/SpaceGrotesk.css';\r\nimport './App.css';\r\n//import Icons\r\nimport SVG from 'react-svg'\r\nimport icon_info from '../../Icons/info.svg';\r\nimport icon_git from '../../Icons/Github.svg';\r\nimport icon_insta from '../../Icons/Instagram.svg';\r\n// import Components\r\nimport Workspace from '../../Components/Workspace/Workspace';\r\nimport Save from '../../Components/Save/Save';\r\nimport Canvas from '../../Components/Canvas/Canvas';\r\n// import Boxes\r\nimport {getClassFromName} from '../../Components/Index';\r\n\r\nwindow.getClassFromName = getClassFromName;\r\n\r\nwindow.isInThisBoxCall = false;\r\n\r\nwindow.updateWorkspace = Workspace.forceUpdate;\r\n\r\nwindow.addClassToElement = function(name, target) {\r\n  let cl = getClassFromName(name);\r\n  target.addChild(cl);\r\n  if(!(target instanceof Workspace)) {\r\n    Workspace.forceUpdate();\r\n  }\r\n};\r\n\r\nwindow.getIconClassFromName = function(name) {\r\n  let cl = getClassFromName(name);\r\n  if(cl) {\r\n    return cl.icon;\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\nwindow.isAuthorized = function(type, unauthorized) {\r\n  let r = true;\r\n  if(!type) return false;\r\n\r\n  if(unauthorized instanceof Array) {\r\n    let obj;\r\n    if(typeof type === 'string') {\r\n      let cl = getClassFromName(type);\r\n      obj = new cl();\r\n    } else {\r\n      obj = new type();\r\n    }\r\n\r\n    for(let i = 0; i < unauthorized.length && r; ++i) {\r\n      let unauthorizedClass = getClassFromName(unauthorized[i]);\r\n      if(unauthorizedClass === null) {\r\n        console.error(unauthorized[i] + ' : Invalid unauthorized Class');\r\n        continue;\r\n      }\r\n      r = r && !(obj instanceof unauthorizedClass);\r\n    }\r\n  } else {\r\n    return false;\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\nlet toggle = false;\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.aboutClick = this.aboutClick.bind(this);\r\n    this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n  }\r\n\r\n  handleOutsideClick(e) {\r\n    // ignore clicks on the component itself\r\n    if (this.aboutContainer.contains(e.target)) {\r\n      return\r\n    }\r\n    if (this.aboutButton.contains(e.target)) {\r\n      this.aboutClick()\r\n      return\r\n    }\r\n    toggle = false\r\n    this.aboutContainer.style.display = 'none'\r\n  }\r\n\r\n  aboutClick() {\r\n    if(!toggle) {\r\n      toggle = !toggle\r\n      this.aboutContainer.style.display = 'flex'\r\n    } else {\r\n      toggle = !toggle\r\n      this.aboutContainer.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='App' onClick={(e) => this.handleOutsideClick(e)}>\r\n        <header className='App-header border-bottom'>\r\n          <div className='App-logo-container'>\r\n            <h1 className='App-logo'>Paperwork&nbsp;<sup className='textExponent'>2020</sup></h1>\r\n            <a className='Header-logo' href='https://github.com/dragonbleapiece/Paperwork' target='_blank' rel='noopener noreferrer'><SVG src={icon_git}/></a>\r\n            <a className='Header-logo' href='https://www.instagram.com/paperwork_imac/' target='_blank' rel='noopener noreferrer'><SVG src={icon_insta}/></a>\r\n          </div>\r\n          <div className='about' ref={aboutButton => { this.aboutButton = aboutButton; }}>\r\n            <SVG src={icon_info}/>\r\n          </div>\r\n        </header>\r\n        <main>\r\n          <div className='leftSide'>\r\n              <div className='aboutContainer' ref={aboutContainer => { this.aboutContainer = aboutContainer; }}>\r\n                <h2 className='aboutTitle'>Paperwork <sup className='textExponent'>2020</sup></h2>\r\n                <a className='aboutLink' href='http://mobitool.free.fr/paper/ea' target='_blank' rel='noopener noreferrer'>State of the arts online</a>\r\n                <p>Paperwork is an online software for research in art and in the field of computer and visual research. It is developed in the perspective of computer art practice in the context of art schools, colleges, high schools and so on. The application helps producing drawings in the philosophy of generative processes. It is concerned with patterns, polygons, repertories and grammars. Moreover, the interface enables the learning and the editing of algorithms and therefore the construction of simple computational processes. It also offers to export svg format that makes it compatible with the traditional vector work area (graphic design, pen plotter, laser cutting, ...).</p>\r\n                <p>Paperwork’s main algorithm is based on Markov chain, an algorithm that was used by artists such as Frieder Nake (Germany), Hiroshi Kawano (Japan), Hervé Huitric and Monique Nahas (France) in early Computer Art. It is now heavily used in our digital environment (google page ranking, chatbots, physical phenomenon modeling, ...). It is also classified in the machine learning area of the computational field.</p>\r\n                <p>The Paperwork web application is based on the previous software experiment Generic Images (2018). Paperwork’s project is developed thanks to IMAC-ESIPE training program in the University Gustave Eiffel.</p>\r\n                <div className='aboutCredits'>\r\n                <p>Software design team:</p>\r\n                <p>Gaëtan Robillard with Nicolas Cusumano, Cécile Rousset, Vincent Schmid, Quentin Sedmi.</p>\r\n                </div>\r\n              </div>\r\n              <Workspace/>\r\n          </div>\r\n            <div className='rightSide border-left'>\r\n              <div className='editionMenu border-bottom'>\r\n                <Save/>\r\n              </div>\r\n                <Canvas/>\r\n            </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './Containers/App/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { configure } from 'enzyme';\r\nimport Adapter from 'enzyme-adapter-react-16';\r\n\r\nconfigure({ adapter: new Adapter() });\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}